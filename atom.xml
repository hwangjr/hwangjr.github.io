<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HwangJR&#39;s Blog</title>
  <subtitle>Life is wonderful!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://hwangjr.github.io/"/>
  <updated>2016-11-01T06:17:32.435Z</updated>
  <id>https://hwangjr.github.io/</id>
  
  <author>
    <name>HwangJR</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>GUI Architectures</title>
    <link href="https://hwangjr.github.io/2016/10/20/GUI-Architectures/"/>
    <id>https://hwangjr.github.io/2016/10/20/GUI-Architectures/</id>
    <published>2016-10-20T07:37:11.000Z</published>
    <updated>2016-11-01T06:17:32.435Z</updated>
    
    <content type="html">&lt;h1 id=&quot;进化历史&quot;&gt;&lt;a href=&quot;#进化历史&quot; class=&quot;headerlink&quot; title=&quot;进化历史&quot;&gt;&lt;/a&gt;进化历史&lt;/h1&gt;&lt;h2 id=&quot;Forms-and-Controls&quot;&gt;&lt;a href=&quot;#Forms-and-Controls&quot; class=&quot;headerlink&quot; title=&quot;Forms and Controls&quot;&gt;&lt;/a&gt;Forms and Controls&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;开发者使用通用控件在form中完成App特有逻辑&lt;/li&gt;
&lt;li&gt;form描述了控件的布局&lt;/li&gt;
&lt;li&gt;form观察控件，通过处理方法来回应感兴趣的事件&lt;/li&gt;
&lt;li&gt;简单的数据编辑使用数据绑定来完成&lt;/li&gt;
&lt;li&gt;复杂的变化使用form的事件处理方法来完成&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;MVC&quot;&gt;&lt;a href=&quot;#MVC&quot; class=&quot;headerlink&quot; title=&quot;MVC&quot;&gt;&lt;/a&gt;MVC&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;明确的分开表现层（view&amp;amp;controller）和领域层（model）- Separated Presentation&lt;/li&gt;
&lt;li&gt;把 GUI widgets 分成 controller（用来处理用户输入） 和 view （用来展示model的状态）。Controller 和 view不应该（大部分情况下）直接的通信而是通过model。&lt;/li&gt;
&lt;li&gt;让views（and controller）观察model 以便允许多个widget都可以更新而不需要直接通信 - Observer Synchronization。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Model-View-Controller 是一种把应用分离成领域、呈现、和用户输入的几种模块的方法。&lt;/p&gt;
&lt;h3 id=&quot;MVC-Misconceptions&quot;&gt;&lt;a href=&quot;#MVC-Misconceptions&quot; class=&quot;headerlink&quot; title=&quot;MVC Misconceptions&quot;&gt;&lt;/a&gt;MVC Misconceptions&lt;/h3&gt;&lt;p&gt;一个常见的误解是Model-View-Controller三个模块之间的关系是Controller用来分离View和Model。尽管MVC模式确实分离了应用领域层和表现层，但是这是通过观察者模式完成的，而不是Controller。Controller是用户和应用之间的中介，而不是用来分离View和Model的。&lt;/p&gt;
&lt;h2 id=&quot;Application-Model&quot;&gt;&lt;a href=&quot;#Application-Model&quot; class=&quot;headerlink&quot; title=&quot;Application Model&quot;&gt;&lt;/a&gt;Application Model&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;遵从MVC，使用了 Separated Presentation 和 Observer Synchronization 模式。&lt;/li&gt;
&lt;li&gt;引入了中间的应用模型(ApplicatonModel) 来处理表现逻辑和状态 - 是Presentation Model 的一部分。&lt;/li&gt;
&lt;li&gt;UI组件不再直接观察领域模型，而是观察应用模型。&lt;/li&gt;
&lt;li&gt;大量使用属性对象来连接不同的层并通过观察者模式来实现细粒度的数据同步&lt;/li&gt;
&lt;li&gt;在应用模型中操作UI组件并不是应用模型原有的设计，但是在复杂的情况下，这种使用非常普遍。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;MVP&quot;&gt;&lt;a href=&quot;#MVP&quot; class=&quot;headerlink&quot; title=&quot;MVP&quot;&gt;&lt;/a&gt;MVP&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;对比&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Form And Controls：MVP有底层model，Presenter会通过Observer Synchronization 模式操作model来更新view。尽管可以直接访问widget，但是这并不能成为除了使用model来更新之外的首选。&lt;/li&gt;
&lt;li&gt;MVC:MVP使用一个Supervising Controller来操作model。Widgets会把用户操作转交给 Supervising Controller。Widget没有被分成 view和controllers。你可以把 Presenter看成是没有处理原始用户手势功能的controller。另外非常重要的是 presenter 是处在 form 层级的而不是 widget层级的，这是和MVC中Controller一个更大的不同。&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ApplicationModel：views把事件转交给presenter这和ApplicationModel类似。但是view可以直接通过Model更新，presenter并不是Presentation Model的角色。另外，在不方面使用Observer Synchronization模式的行为中，presenter默认是可以直接访问widgets的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用户手势（译注：现在认为应该译成动作）通过 widgets 被转移到 Supervising Controller&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;presenter 协调 domain model 中得变化&lt;/li&gt;
&lt;li&gt;MVP的不同版本处理view的方式不同。从Observer Synchronization 到使用 presenter 来实现所有的更新。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;Humble-View&quot;&gt;&lt;a href=&quot;#Humble-View&quot; class=&quot;headerlink&quot; title=&quot;Humble View&quot;&gt;&lt;/a&gt;Humble View&lt;/h2&gt;&lt;p&gt;The Humble Dialog Box论文中使用了MVP模式，但是比原始的MVP模式更进一层。presenter不仅仅处理用户输入，同时负责数据填充，这样，widget不在需要知道model。它形成了被 presenter操作的 Passive View。&lt;/p&gt;
&lt;p&gt;这不是唯一的使UI变得简单的方式。另外一种方式就是使用 Presentation Model，尽管这样还是需要在widget中做一些逻辑，但是对于widget来说已经足够把自己映射到 Presentation Model 了。&lt;/p&gt;
&lt;p&gt;这两种方式的关键是测试presenter或者测试presenter model，你可以在不碰那些难以测试的widget之前测试到大部分的UI问题。&lt;/p&gt;
&lt;p&gt;使用 Presentation Model 模式可以把大量真实的逻辑放在 Presentation Model 里面。所有的用户输入和现实逻辑都路由到 Presentation Model，这样所有的widget需要做的就是把自己映射到 Presentation Model 的属性上。然后你就可以测试Presentation Model 的大部分逻辑而不需要现实任何界面 - 唯一的风险存在于 widget映射。但是这些操作很简单可以不测。在这个例子中屏幕还是没有使用 Passive View 来的简单，但是区别也很小了。&lt;/p&gt;
&lt;p&gt;因为 Passive View 使 widgets变得太简单了，甚至不存在映射，Passive View 甚至消除了 Presentation Model 模式中存在的风险。代价是你需要一个 Test Double 框架来模拟屏幕 - 这是你需要额外构建的机制。&lt;/p&gt;
&lt;p&gt;在Supervising Controller模式中也存在这种折衷。让每个view做简单的映射会引入风险（和Presentation Model类似）但是带来的好处是可以简单明确的声明映射。在 Supervising Controller 中映射会比较少，因为在 Presentation Model 中还要处理复杂的更新问题。而 Supervising Controller 只要在内部操作widget就行了而不需要映射回去。&lt;/p&gt;
&lt;h1 id=&quot;REF&quot;&gt;&lt;a href=&quot;#REF&quot; class=&quot;headerlink&quot; title=&quot;REF&quot;&gt;&lt;/a&gt;REF&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://www.martinfowler.com/eaaDev/uiArchs.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GUI Architectures&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.jianshu.com/p/d52e662db75c&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;UI 架构小史1（GUI Architectures） - 简书&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      There have been many different ways to organize the code for a rich client system. Here I discuss a selection of those that I feel have been the most influential and introduce how they relate to the patterns.
    
    </summary>
    
      <category term="Architecture" scheme="https://hwangjr.github.io/categories/Architecture/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Architecture" scheme="https://hwangjr.github.io/tags/Architecture/"/>
    
  </entry>
  
  <entry>
    <title>技术面试指南</title>
    <link href="https://hwangjr.github.io/2016/10/06/%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97/"/>
    <id>https://hwangjr.github.io/2016/10/06/技术面试指南/</id>
    <published>2016-10-06T07:37:11.000Z</published>
    <updated>2016-11-01T06:25:40.437Z</updated>
    
    <content type="html">&lt;h1 id=&quot;模式&quot;&gt;&lt;a href=&quot;#模式&quot; class=&quot;headerlink&quot; title=&quot;模式&quot;&gt;&lt;/a&gt;模式&lt;/h1&gt;&lt;h2 id=&quot;经验&quot;&gt;&lt;a href=&quot;#经验&quot; class=&quot;headerlink&quot; title=&quot;经验&quot;&gt;&lt;/a&gt;经验&lt;/h2&gt;&lt;p&gt;之前在哪里工作，主要用PHP做什么样的工作，平时有开发一些什么项目，有开源项目吗？&lt;/p&gt;
&lt;h2 id=&quot;广度&quot;&gt;&lt;a href=&quot;#广度&quot; class=&quot;headerlink&quot; title=&quot;广度&quot;&gt;&lt;/a&gt;广度&lt;/h2&gt;&lt;p&gt;熟悉PHP的哪些框架，除了用PHP之外，还接触过什么，用什么，做过什么？&lt;/p&gt;
&lt;p&gt;对WEB安全的认识？&lt;/p&gt;
&lt;p&gt;之前做过的项目的运行环境，平时自己的开发环境&lt;/p&gt;
&lt;p&gt;对高性能WEB架构的了解情况（缓存的认识）&lt;/p&gt;
&lt;p&gt;对MySQL熟悉情况，慢查询查找和解决&lt;/p&gt;
&lt;h2 id=&quot;深度&quot;&gt;&lt;a href=&quot;#深度&quot; class=&quot;headerlink&quot; title=&quot;深度&quot;&gt;&lt;/a&gt;深度&lt;/h2&gt;&lt;p&gt;PHP版本、LAMP/LNMP、性能调优、阅读源代码（开源项目源代码、PHP源代码）&lt;/p&gt;
&lt;p&gt;分库表怎么做，主从同步、负载均衡&lt;/p&gt;
&lt;p&gt;如果让你设计一张表结构，你会如何设计&lt;/p&gt;
&lt;h2 id=&quot;思想&quot;&gt;&lt;a href=&quot;#思想&quot; class=&quot;headerlink&quot; title=&quot;思想&quot;&gt;&lt;/a&gt;思想&lt;/h2&gt;&lt;p&gt;解决问题的方法和思路&lt;/p&gt;
&lt;h2 id=&quot;深度的问题&quot;&gt;&lt;a href=&quot;#深度的问题&quot; class=&quot;headerlink&quot; title=&quot;深度的问题&quot;&gt;&lt;/a&gt;深度的问题&lt;/h2&gt;&lt;p&gt;一个用户在浏览器上输入URL开始，到页面最终展示完成，其中都经历了哪些过程？&lt;/p&gt;
&lt;p&gt;用户反馈你的网站打开太慢，请列出所有可能性和排查方法&lt;/p&gt;
&lt;h1 id=&quot;原文&quot;&gt;&lt;a href=&quot;#原文&quot; class=&quot;headerlink&quot; title=&quot;原文&quot;&gt;&lt;/a&gt;原文&lt;/h1&gt;&lt;p&gt;1、工作经验&lt;br&gt;最近这次今年2月才入职，现在就要跳，为什么？&lt;/p&gt;
&lt;p&gt;这几年来，自己做过的项目，觉得最满意的是什么，怎么做的，为什么？&lt;/p&gt;
&lt;p&gt;这些年的项目团队管理过程中，管理多少人的项目团队，人员分配是怎样的，有什么心得体会，遇到过最棘手的问题是什么，怎么处理的？&lt;/p&gt;
&lt;p&gt;2、技术方面&lt;br&gt;负责过项目的每天流量情况？架构是怎样的？&lt;/p&gt;
&lt;p&gt;网站负载均衡用的是什么方案？有遇到什么坑吗？怎么解决的？&lt;/p&gt;
&lt;p&gt;数据库主从怎么考量，怎么维护？有遇到过什么坑吗？怎么解决的？&lt;/p&gt;
&lt;p&gt;有使用过什么缓存方案？对缓存好坏的指标，如何定义？Web过程中，有哪些缓存，是如何理解的？&lt;/p&gt;
&lt;p&gt;Web安全，有做过哪些考量？有遇到过安全问题吗？怎么解决的？有遇到过慢查询问题吗？处理的过程是如何的？&lt;/p&gt;
&lt;p&gt;3、个人能力和成长&lt;br&gt;除了LAMP/LNMP之外，还接触过什么？&lt;/p&gt;
&lt;p&gt;有什么开源项目吗？Github有账号吗？&lt;/p&gt;
&lt;p&gt;4、开放性问题&lt;br&gt;一个用户在浏览器上输入URL开始，到页面最终展示完成，其中都经历了哪些过程？&lt;/p&gt;
&lt;p&gt;用户反映你的网站打开太慢，请列出所有可能性和排查方法&lt;/p&gt;
&lt;p&gt;我一般，会从项目入手，通过项目，然后看技术，问下他熟悉的技术，是否研究透彻还是皮毛。开源问下，自我学习方法，等。一般关注点：1. 沟通交流是否顺畅，如果全部答非所问，基本PASS。2. 技术是否停留在用阶段，是否有继续深入学习，自我学习管理方法。3. 技术深入，肯定面就广，这时可以问面的问题，比如ANDROID是否有接触过jni、源码、开源项目源码等这类，设计模式如果觉得水平够，也会问，一般单例或者工厂，简单。4.基本上面如果顺畅的话，三官正不正，稳定性如何，可能会有最近离职原因、是否有女朋友之类的。以上！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      总结面试指南，不定期更新。
    
    </summary>
    
      <category term="创业" scheme="https://hwangjr.github.io/categories/%E5%88%9B%E4%B8%9A/"/>
    
    
      <category term="创业" scheme="https://hwangjr.github.io/tags/%E5%88%9B%E4%B8%9A/"/>
    
  </entry>
  
  <entry>
    <title>快速搭建GitLab (Docker)</title>
    <link href="https://hwangjr.github.io/2016/09/10/%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BAGitLab-Docker/"/>
    <id>https://hwangjr.github.io/2016/09/10/快速搭建GitLab-Docker/</id>
    <published>2016-09-10T07:37:11.000Z</published>
    <updated>2016-11-01T03:55:53.435Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction&quot;&gt;&lt;/a&gt;Introduction&lt;/h1&gt;&lt;p&gt;公司需要切换到Git来进行管理，而GitLab是比较全的工具，虽然比较大（自身服务器是利用gitolite搭建）。使用Docker来进行搭建，基本在10秒时间内就可以快速尝试Gitlab，而且服务器仅需要安装Docker即可。且，我对Docker基本使用比较熟悉～&lt;/p&gt;
&lt;h1 id=&quot;Installation-CentOS-7&quot;&gt;&lt;a href=&quot;#Installation-CentOS-7&quot; class=&quot;headerlink&quot; title=&quot;Installation - CentOS 7&quot;&gt;&lt;/a&gt;Installation - CentOS 7&lt;/h1&gt;&lt;p&gt;本次使用Docker-Compose来进行启动和切换，简化管理。&lt;/p&gt;
&lt;h2 id=&quot;Install-Docker&quot;&gt;&lt;a href=&quot;#Install-Docker&quot; class=&quot;headerlink&quot; title=&quot;Install Docker&quot;&gt;&lt;/a&gt;Install Docker&lt;/h2&gt;&lt;p&gt;添加源：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo tee /etc/yum.repos.d/docker.repo &amp;lt;&amp;lt;-&amp;apos;EOF&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dockerrepo]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;name=Docker Repository&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;baseurl=https://yum.dockerproject.org/repo/main/centos/7/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;enabled=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gpgcheck=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gpgkey=https://yum.dockerproject.org/gpg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;安装：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo yum install docker-engine&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;启动：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo systemctl start docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;开机启动：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo systemctl enable docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;也可以傻瓜式脚本安装：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo yum update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ curl -fsSL https://get.docker.com/ | sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo systemctl enable docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo systemctl start docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;更多信息：&lt;a href=&quot;https://docs.docker.com/engine/installation/linux/centos/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Installation on CentOS&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Install-Docker-Compose&quot;&gt;&lt;a href=&quot;#Install-Docker-Compose&quot; class=&quot;headerlink&quot; title=&quot;Install Docker Compose&quot;&gt;&lt;/a&gt;Install Docker Compose&lt;/h2&gt;&lt;p&gt;上代码：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -L https://github.com/docker/compose/releases/download/1.8.0-rc2/docker-compose-`uname -s`-`uname -m` &amp;gt; /usr/local/bin/docker-compose&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chmod +x /usr/local/bin/docker-compose&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;更多信息：&lt;a href=&quot;https://github.com/docker/compose&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;docker/compose: Define and run multi-container applications with Docker&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;编写docker-compose-yml&quot;&gt;&lt;a href=&quot;#编写docker-compose-yml&quot; class=&quot;headerlink&quot; title=&quot;编写docker-compose.yml&quot;&gt;&lt;/a&gt;编写docker-compose.yml&lt;/h2&gt;&lt;p&gt;获得最新&lt;code&gt;docker-compose.yml&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget https://raw.githubusercontent.com/sameersbn/docker-gitlab/master/docker-compose.yml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在定制自身的启动脚本时，需要注意几个点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;容器文件存储目录，即&lt;code&gt;volumes&lt;/code&gt;修改为自身想要存储的目录&lt;/li&gt;
&lt;li&gt;Postgresql数据库的&lt;code&gt;DB_PASS&lt;/code&gt;需要修改为自身&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GitLab&lt;/code&gt;容器的&lt;code&gt;Port&lt;/code&gt;映射，修改为自身想要的端口&lt;/li&gt;
&lt;li&gt;市区修改为&lt;code&gt;Beijing&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GITLAB_HOST&lt;/code&gt;修改为访问地址&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GITLAB_SECRETS_DB_KEY_BASE&lt;/code&gt;修改为生成的密钥（可使用&lt;code&gt;pwgen -Bsv1 64&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GITLAB_EMAIL&lt;/code&gt;修改为&lt;code&gt;SMTP&lt;/code&gt;发送邮箱&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SMTP&lt;/code&gt;邮件配置见下方&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# QQ SMTP CONFIG&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- SMTP_ENABLED=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- SMTP_DOMAIN=domain.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- SMTP_HOST=smtp.exmail.qq.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- SMTP_PORT=465&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- SMTP_USER=hwangjr@domain.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- SMTP_PASS=hwangjrpass&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- SMTP_STARTTLS=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- SMTP_TLS=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- SMTP_AUTHENTICATION=login&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其他不进行配置。&lt;/p&gt;
&lt;h2 id=&quot;Run&quot;&gt;&lt;a href=&quot;#Run&quot; class=&quot;headerlink&quot; title=&quot;Run&quot;&gt;&lt;/a&gt;Run&lt;/h2&gt;&lt;p&gt;启动容器及其他常用命令：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker-compose up -d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker-compose down&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker-compose stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker-compose rm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker-compose logs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;数据备份和恢复&quot;&gt;&lt;a href=&quot;#数据备份和恢复&quot; class=&quot;headerlink&quot; title=&quot;数据备份和恢复&quot;&gt;&lt;/a&gt;数据备份和恢复&lt;/h2&gt;&lt;p&gt;备份：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker-compose stop &amp;amp;&amp;amp; docker-compose rm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker run --name gitlab -it --rm sameersbn/gitlab:latest app:rake gitlab:backup:create&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;恢复：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker-compose stop &amp;amp;&amp;amp; docker-compose rm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker run --name gitlab -it --rm sameersbn/gitlab:latest app:rake gitlab:backup:restore&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# docker run --name gitlab -it --rm sameersbn/gitlab:latest app:rake gitlab:backup:restore BACKUP=1417624827&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;更多信息：&lt;a href=&quot;https://github.com/sameersbn/docker-gitlab&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sameersbn/docker-gitlab: Dockerized GitLab&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;Ref&quot;&gt;&lt;a href=&quot;#Ref&quot; class=&quot;headerlink&quot; title=&quot;Ref&quot;&gt;&lt;/a&gt;Ref&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/sameersbn/docker-gitlab&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sameersbn/docker-gitlab: Dockerized GitLab&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://docs.docker.com/compose/install/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Install Compose&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/docker/compose&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;docker/compose: Define and run multi-container applications with Docker&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      利用Docker快速搭建GitLab服务器，这里使用到了[sameersbn/docker-gitlab](https://github.com/sameersbn/docker-gitlab)来进行快速搭建，配置里面包括腾讯的STMP邮件配置。
    
    </summary>
    
      <category term="Git" scheme="https://hwangjr.github.io/categories/Git/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Git" scheme="https://hwangjr.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Linux删除root无法删除的文件</title>
    <link href="https://hwangjr.github.io/2016/08/21/Linux%E5%88%A0%E9%99%A4root%E6%97%A0%E6%B3%95%E5%88%A0%E9%99%A4%E7%9A%84%E6%96%87%E4%BB%B6/"/>
    <id>https://hwangjr.github.io/2016/08/21/Linux删除root无法删除的文件/</id>
    <published>2016-08-21T03:52:29.000Z</published>
    <updated>2016-11-01T03:53:09.535Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Solution&quot;&gt;&lt;a href=&quot;#Solution&quot; class=&quot;headerlink&quot; title=&quot;Solution&quot;&gt;&lt;/a&gt;Solution&lt;/h1&gt;&lt;p&gt;一般此类都是&lt;code&gt;chattr&lt;/code&gt;作怪，修改之：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chattr -i /home/wwwroot/yoursite/.user.ini&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果只是编辑文件，记得修改完毕再加上：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chattr +i /home/wwwroot/yoursite/.user.ini&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;Conclusion&quot;&gt;&lt;a href=&quot;#Conclusion&quot; class=&quot;headerlink&quot; title=&quot;Conclusion&quot;&gt;&lt;/a&gt;Conclusion&lt;/h1&gt;&lt;p&gt;最初遇到此问题是：LNMP无法删除或更改权限，显示：rm: cannot remove `.user.ini’: Operation not permitted。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;chattr&lt;/code&gt;命令：&lt;/strong&gt;有时候你发现用root权限都不能修改某个文件，大部分原因是曾经用&lt;code&gt;chattr&lt;/code&gt;命令锁定该文件了。&lt;code&gt;chattr&lt;/code&gt;命令的作用很大，通过&lt;code&gt;chattr&lt;/code&gt;命令修改属性能够提高系统的安全性，但是它并不适合所有的目录。&lt;code&gt;chattr&lt;/code&gt;命令不能保护&lt;code&gt;/&lt;/code&gt;、&lt;code&gt;/dev&lt;/code&gt;、&lt;code&gt;/tmp&lt;/code&gt;、&lt;code&gt;/var&lt;/code&gt;目录。&lt;code&gt;lsattr&lt;/code&gt;命令是显示&lt;code&gt;chattr&lt;/code&gt;命令设置的文件属性。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chattr -h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Usage: chattr [-RVf] [-+=aAcCdDeijsStTu] [-v version] files...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;－R    递归处理所有的文件及子目录。&lt;br&gt;－V    详细显示修改内容，并打印输出。&lt;br&gt;–    失效属性。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;激活属性。&lt;br&gt;=    指定属性。&lt;br&gt;A    Atime，告诉系统不要修改对这个文件的最后访问时间。&lt;br&gt;S    Sync，一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘。&lt;br&gt;a    Append Only，系统只允许在这个文件之后追加数据，不允许任何进程覆盖或截断这个文件。如果目录具有这个属性，系统将只允许在这个目录下建立和修改文件，而不允许删除任何文件。&lt;br&gt;i    Immutable，系统不允许对这个文件进行任何的修改。如果目录具有这个属性，那么任何的进程只能修改目录之下的文件，不允许建立和删除文件。&lt;br&gt;D    检查压缩文件中的错误。&lt;br&gt;d    No dump，在进行文件系统备份时，dump程序将忽略这个文件。&lt;br&gt;C    Compress，系统以透明的方式压缩这个文件。从这个文件读取时，返回的是解压之后的数据；而向这个文件中写入数据时，数据首先被压缩之后才写入磁盘。&lt;br&gt;s    Secure Delete，让系统在删除这个文件时，使用0填充文件所在的区域。&lt;br&gt;u    Undelete，当一个应用程序请求删除这个文件，系统会保留其数据块以便以后能够恢复删除这个文件。&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 用chattr命令防止系统中某个关键文件被修改：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chattr +i /etc/resolv.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 用lsattr查询文件属性：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsattr /etc/resolv.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 让某个文件只能往里面追加数据，但不能删除，适用于各种日志文件：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chattr +a /var/log/messages&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      类似PHP中`.user.ini`文件，`root`用户删除也会提示无法删除文件，此类文件属于什么类型文件，又该如何进行修改呢？
    
    </summary>
    
      <category term="Linux" scheme="https://hwangjr.github.io/categories/Linux/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Linux" scheme="https://hwangjr.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>关于Target SDK Version</title>
    <link href="https://hwangjr.github.io/2016/07/04/%E5%85%B3%E4%BA%8ETarget-SDK-Version/"/>
    <id>https://hwangjr.github.io/2016/07/04/关于Target-SDK-Version/</id>
    <published>2016-07-04T09:18:21.000Z</published>
    <updated>2016-07-04T09:20:10.153Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction&quot;&gt;&lt;/a&gt;Introduction&lt;/h1&gt;&lt;p&gt;在AS的&lt;code&gt;build.gradle&lt;/code&gt;中，会有&lt;code&gt;compileSdkVersion&lt;/code&gt;、&lt;code&gt;minSdkVersion&lt;/code&gt;以及&lt;code&gt;targetSdkVersion&lt;/code&gt;的设定，一般我们直接选择最低，然后其他默认。但是在默认情况下，其实是会有适配问题。&lt;/p&gt;
&lt;h1 id=&quot;Meaning&quot;&gt;&lt;a href=&quot;#Meaning&quot; class=&quot;headerlink&quot; title=&quot;Meaning&quot;&gt;&lt;/a&gt;Meaning&lt;/h1&gt;&lt;p&gt;关于&lt;code&gt;compileSdkVersion&lt;/code&gt;和&lt;code&gt;minSdkVersion&lt;/code&gt;的含义很好理解，&lt;code&gt;compileSdkVersion&lt;/code&gt;表示编译的SDK版本，而&lt;code&gt;minSdkVersion&lt;/code&gt;则表示应用兼容的最低版本。相比而言，&lt;code&gt;targetSdkVersion&lt;/code&gt;则会更让人有歧义。&lt;/p&gt;
&lt;h1 id=&quot;Target-SDK-Version&quot;&gt;&lt;a href=&quot;#Target-SDK-Version&quot; class=&quot;headerlink&quot; title=&quot;Target SDK Version&quot;&gt;&lt;/a&gt;Target SDK Version&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;targetSdkVersion&lt;/strong&gt; is the main way Android provides forward compatibility by not applying behavior changes unless the targetSdkVersion is updated. This allows you to use new APIs (as you did update your compileSdkVersion right?) prior to working through the behavior changes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Android系统升级，伴随API升级，而Target SDK Version则是针对应用提供了向前兼容的能力，即针对Target SDK Version没有更新之前，系用不会应用新的行为变化。&lt;/p&gt;
&lt;p&gt;举个栗子：大家都知道在6.0之后，Android升级了其权限管理，应用了运行时权限模型。那么如果升级了Android系统到6.0之后，旧的应用是否都无法使用了？&lt;/p&gt;
&lt;p&gt;答案自然是否定，这时Target SDK Version就发挥作用了，系统会读取应用的Target SDK Version，来决定接下来的行为，如果是旧的应用，则其Target SDK Version小于23（6.0），Android则不会应用新的运行时权限模型进行检查。&lt;/p&gt;
&lt;p&gt;自然，你可以根据&lt;a href=&quot;https://medium.com/google-developers/picking-your-compilesdkversion-minsdkversion-targetsdkversion-a098a0341ebd#.ufwotvht8&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;原文&lt;/a&gt;提供的AlarmManager的&lt;code&gt;set()&lt;/code&gt;和&lt;code&gt;setRepeat()&lt;/code&gt;接口例子来进行验证（即在KITKAT之后在原有精确唤醒基础上，为了省电加入对齐唤醒机制）。应该可以看到源码对应用的&lt;code&gt;target sdk version&lt;/code&gt;进行判断：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;AlarmManager(IAlarmManager service, Context ctx) &amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mService = service;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final int sdkVersion = ctx.getApplicationInfo().targetSdkVersion;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mAlwaysExact = (sdkVersion &amp;lt; Build.VERSION_CODES.KITKAT);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;硬编码方式自然不好，不过好在我们可以有个&lt;a href=&quot;https://developer.android.com/about/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Check List&lt;/a&gt;可以查看。&lt;/p&gt;
&lt;h1 id=&quot;Conclusion&quot;&gt;&lt;a href=&quot;#Conclusion&quot; class=&quot;headerlink&quot; title=&quot;Conclusion&quot;&gt;&lt;/a&gt;Conclusion&lt;/h1&gt;&lt;h2 id=&quot;Compile-SDK-Version&quot;&gt;&lt;a href=&quot;#Compile-SDK-Version&quot; class=&quot;headerlink&quot; title=&quot;Compile SDK Version&quot;&gt;&lt;/a&gt;Compile SDK Version&lt;/h2&gt;&lt;p&gt;用哪个版本来编译你的应用，正常来说，随你心情，但是最好还是使用最新发布版本。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;使用最新版本&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;会产生新的编译警告和编译错误（包括弃用的API等），正常需要针对这些警告和错误进行修正。&lt;/li&gt;
&lt;li&gt;使用&lt;a href=&quot;http://developer.android.com/tools/support-library/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Support Library&lt;/a&gt;时，需要注意使用最新的SDK进行编译，一般会随着系统升级而升级，提供新的API和新特性的兼容。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;Min-SDK-Version&quot;&gt;&lt;a href=&quot;#Min-SDK-Version&quot; class=&quot;headerlink&quot; title=&quot;Min SDK Version&quot;&gt;&lt;/a&gt;Min SDK Version&lt;/h2&gt;&lt;p&gt;最低兼容版本，每个应用需求不同，目前普遍已经&lt;code&gt;15&lt;/code&gt;了。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Lint&lt;/code&gt;检查时，会帮助检查是否使用了&lt;code&gt;min sdk version&lt;/code&gt;的接口&lt;/li&gt;
&lt;li&gt;使用&lt;a href=&quot;http://developer.android.com/tools/support-library/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Support Library&lt;/a&gt;或者&lt;a href=&quot;https://developers.google.com/android/guides/overview&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Google Play Services&lt;/a&gt;时，他们有自身&lt;code&gt;min sdk version&lt;/code&gt;，自然， 你可以使用&lt;a href=&quot;http://tools.android.com/tech-docs/new-build-system/user-guide/manifest-merger&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;tools:overrideLibrary&lt;/a&gt;来强制使用，但是需要&lt;strong&gt;测试-测试-测试&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;Target-SDK-Version-1&quot;&gt;&lt;a href=&quot;#Target-SDK-Version-1&quot; class=&quot;headerlink&quot; title=&quot;Target SDK Version&quot;&gt;&lt;/a&gt;Target SDK Version&lt;/h2&gt;&lt;p&gt;最后这个Version，&lt;strong&gt;至关重要&lt;/strong&gt;，如果设置错误，会导致应用在高版本机器上&lt;strong&gt;崩溃&lt;/strong&gt;。如果没有兼容新的权限模型，建议设置为&lt;code&gt;18&lt;/code&gt;（&lt;code&gt;22&lt;/code&gt;即可降低为不兼容新权限模型，但是经过测试，&lt;code&gt;&amp;lt;uses-permission android:name=&amp;quot;android.permission.WRITE_SETTINGS&amp;quot; /&amp;gt;&lt;/code&gt;权限，在18以上都会&lt;strong&gt;雪崩&lt;/strong&gt;，如果要使用此权限，降低为&lt;code&gt;18&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;所以：&lt;code&gt;minSdkVersion &amp;lt;= targetSdkVersion &amp;lt;= compileSdkVersion&lt;/code&gt;，理想上为：&lt;code&gt;minSdkVersion (lowest possible) &amp;lt;= targetSdkVersion == compileSdkVersion (latest SDK)&lt;/code&gt;。&lt;strong&gt;用较低的minSdkVersion覆盖更多的人群，用最新的SDK设置Target和Compile版本来获得最好的支持。&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;Refs&quot;&gt;&lt;a href=&quot;#Refs&quot; class=&quot;headerlink&quot; title=&quot;Refs&quot;&gt;&lt;/a&gt;Refs&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://medium.com/google-developers/picking-your-compilesdkversion-minsdkversion-targetsdkversion-a098a0341ebd#.ufwotvht8&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Picking your compileSdkVersion, minSdkVersion, targetSdkVersion — Google Developers&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://chinagdg.org/2016/01/picking-your-compilesdkversion-minsdkversion-targetsdkversion/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何选择 compileSdkVersion, minSdkVersion 和 targetSdkVersion&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      关于Target SDK Version及其兼容性的问题。
    
    </summary>
    
      <category term="Android" scheme="https://hwangjr.github.io/categories/Android/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Android" scheme="https://hwangjr.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>OpenSUSE 初始化</title>
    <link href="https://hwangjr.github.io/2016/06/20/OpenSUSE-%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
    <id>https://hwangjr.github.io/2016/06/20/OpenSUSE-初始化/</id>
    <published>2016-06-20T07:37:11.000Z</published>
    <updated>2016-11-01T06:20:28.467Z</updated>
    
    <content type="html">&lt;h1 id=&quot;添加源&quot;&gt;&lt;a href=&quot;#添加源&quot; class=&quot;headerlink&quot; title=&quot;添加源&quot;&gt;&lt;/a&gt;添加源&lt;/h1&gt;&lt;p&gt;添加三个源，中科大镜像、Packman镜像和openSUSE_zh：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper ar -f http://mirrors.ustc.edu.cn/opensuse/distribution/leap/42.1/repo/oss/ ustc-leap-oss&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper ar -f http://mirrors.ustc.edu.cn/opensuse/distribution/leap/42.1/repo/non-oss/ ustc-leap-non-oss&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# official website is: http://ftp.gwdg.de/pub/linux/packman/suse/openSUSE_Leap_42.1/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper ar -f http://mirrors.hust.edu.cn/packman/suse/openSUSE_Leap_42.1/ packman&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper ar -f http://download.opensuse.org/repositories/home:/opensuse_zh/openSUSE_Leap_42.1/ opensuse_zh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;刷新：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper ref&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;开启：&lt;strong&gt;&lt;code&gt;ALT + F2&lt;/code&gt; -&amp;gt; &lt;code&gt;yast&lt;/code&gt; -&amp;gt; &lt;code&gt;software repositories&lt;/code&gt; -&amp;gt; &lt;code&gt;enable and disable (u like)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;安装软件&quot;&gt;&lt;a href=&quot;#安装软件&quot; class=&quot;headerlink&quot; title=&quot;安装软件&quot;&gt;&lt;/a&gt;安装软件&lt;/h1&gt;&lt;h2 id=&quot;Thunderbird&quot;&gt;&lt;a href=&quot;#Thunderbird&quot; class=&quot;headerlink&quot; title=&quot;Thunderbird&quot;&gt;&lt;/a&gt;Thunderbird&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper in thunderbird&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;VirtualBox&quot;&gt;&lt;a href=&quot;#VirtualBox&quot; class=&quot;headerlink&quot; title=&quot;VirtualBox&quot;&gt;&lt;/a&gt;VirtualBox&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper in virtualbox&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Konsole&quot;&gt;&lt;a href=&quot;#Konsole&quot; class=&quot;headerlink&quot; title=&quot;Konsole&quot;&gt;&lt;/a&gt;Konsole&lt;/h2&gt;&lt;p&gt;修改配色和文字大小：&lt;br&gt;&lt;code&gt;Settings&lt;/code&gt; -&amp;gt; &lt;code&gt;Manage Profiles&lt;/code&gt; -&amp;gt; &lt;code&gt;New Profiles&lt;/code&gt; -&amp;gt; &lt;code&gt;Custom the profiles and set to default&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ALL DONE!&lt;/p&gt;
&lt;h2 id=&quot;安装Chrome浏览器&quot;&gt;&lt;a href=&quot;#安装Chrome浏览器&quot; class=&quot;headerlink&quot; title=&quot;安装Chrome浏览器&quot;&gt;&lt;/a&gt;安装Chrome浏览器&lt;/h2&gt;&lt;p&gt;导入Google的Key：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget https://dl.google.com/linux/linux_signing_key.pub&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo rpm --import linux_signing_key.pub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;添加源：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 64 bit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper ar http://dl.google.com/linux/chrome/rpm/stable/x86_64 google-chrome&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper ref&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper in google-chrome-stable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 32 bit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper ar http://dl.google.com/linux/chrome/rpm/stable/i386 google-chrome&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper ref&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper in  google-chrome-stable&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;安装其他版本：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper in google-chrome-beta&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper in google-chrome-unstable&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;安装开源&lt;code&gt;chromium&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper in chromium&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;Docker&quot;&gt;&lt;a href=&quot;#Docker&quot; class=&quot;headerlink&quot; title=&quot;Docker&quot;&gt;&lt;/a&gt;Docker&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper in docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl start docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl enable docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Install latest version:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# try https://get.docker.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl -sSL https://get.docker.com/ | sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget -qO- https://get.docker.com/ | sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# or add repositories yourself&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# http://download.opensuse.org/repositories/Virtualization:/containers/openSUSE_Leap_42.1/   Virtualization:containers&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Uninstall:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper rm docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm -rf /var/lib/docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;媒体&quot;&gt;&lt;a href=&quot;#媒体&quot; class=&quot;headerlink&quot; title=&quot;媒体&quot;&gt;&lt;/a&gt;媒体&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://opensuse-community.org/codecs-kde.ymp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://opensuse-community.org/codecs-kde.ymp&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      OpenSUSE 初始化，包括源、软件等。
    
    </summary>
    
      <category term="Linux" scheme="https://hwangjr.github.io/categories/Linux/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Linux" scheme="https://hwangjr.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>GitLab与SVN同时使用</title>
    <link href="https://hwangjr.github.io/2016/06/11/GitLab%E4%B8%8ESVN%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8/"/>
    <id>https://hwangjr.github.io/2016/06/11/GitLab与SVN同时使用/</id>
    <published>2016-06-11T03:49:04.000Z</published>
    <updated>2016-11-01T03:51:15.488Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;将使用Git来进行研发，但是要定期同步到SVN上，所以需要进行协作。&lt;/p&gt;
&lt;h1 id=&quot;实现&quot;&gt;&lt;a href=&quot;#实现&quot; class=&quot;headerlink&quot; title=&quot;实现&quot;&gt;&lt;/a&gt;实现&lt;/h1&gt;&lt;h2 id=&quot;工具&quot;&gt;&lt;a href=&quot;#工具&quot; class=&quot;headerlink&quot; title=&quot;工具&quot;&gt;&lt;/a&gt;工具&lt;/h2&gt;&lt;p&gt;将使用&lt;code&gt;git-svn&lt;/code&gt;工具进行同步，命令&lt;code&gt;git svn&lt;/code&gt;，其中此命令有很多用法，这里只说明常用的几个。&lt;/p&gt;
&lt;p&gt;CentOS7中安装&lt;code&gt;git-svn&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install git-svn&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;解决错误信息：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git svn clone svn://domain/project&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git: ‘svn’ is not a git-command. See ‘git –help’.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; Did you mean one of these?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fsck&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        show&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;svn与git用户对照&quot;&gt;&lt;a href=&quot;#svn与git用户对照&quot; class=&quot;headerlink&quot; title=&quot;svn与git用户对照&quot;&gt;&lt;/a&gt;svn与git用户对照&lt;/h2&gt;&lt;p&gt;在Subversion中每个提交都有用户名，并在提交信息中展示，如果想让已经提交的信息更好的映射到Git中，需要从Subversion中导出提交的用户到Git，作为映射关系。因为Git是以邮箱来作为标识，所以需要建立一个&lt;code&gt;author&lt;/code&gt;文件（或者其他你喜欢的名字），格式为：&lt;code&gt;svn作者 = 作者昵称&amp;lt;邮箱地址&amp;gt;&lt;/code&gt;，示例如下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;john = John&amp;lt;john@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mike = Mike&amp;lt;mike@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;可以简单使用脚本获取SVN提交作者（之后按照上面格式进行编辑即可）：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;svn log --xml | grep &amp;quot;^&amp;lt;author&amp;quot; | sort -u | awk -F &amp;apos;\&amp;lt;author\&amp;gt;&amp;apos; &amp;apos;&amp;#123;print $2&amp;#125;&amp;apos; | awk -F &amp;apos;\&amp;lt;/author\&amp;gt;&amp;apos; &amp;apos;&amp;#123;print $1&amp;#125;&amp;apos; &amp;gt; author&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果SVN提交者和GIT用户一样，或者对于此对照不是很CARE，则可以省略此步骤。&lt;/p&gt;
&lt;h2 id=&quot;Checkout-SVN到本地&quot;&gt;&lt;a href=&quot;#Checkout-SVN到本地&quot; class=&quot;headerlink&quot; title=&quot;Checkout SVN到本地&quot;&gt;&lt;/a&gt;Checkout SVN到本地&lt;/h2&gt;&lt;p&gt;用&lt;code&gt;git svn&lt;/code&gt;命令将SVN项目Checkout到本地：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git svn clone svn://domain/project --authors-file=author project&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果不需要从头到尾的记录的话，则可以直接通过&lt;code&gt;-r&lt;/code&gt;参数来控制导出的版本数（从xxx版本到head版本）：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git svn clone svn://domain/project --authors-file=author -r xxx:head&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这里需要注明&lt;code&gt;--no-metadata&lt;/code&gt;这个参数，此参数可说明不要SVN信息，比较适合在迁移的时候，而要共用的话，是需要这类信息。因为在Checkout下来时候，会针对SVN的提交做补丁，产生一个Git提交。&lt;/p&gt;
&lt;p&gt;如果没有使用&lt;code&gt;--no-metadata&lt;/code&gt;来进行clone的话，在进行&lt;code&gt;git log&lt;/code&gt;时候，可以看到git和svn的提交的关联关系，即&lt;code&gt;git-svn-id&lt;/code&gt;属性。如果没有&lt;code&gt;git-svn-id&lt;/code&gt;这个属性，是无法将git的记录提交到SVN。&lt;/p&gt;
&lt;p&gt;如果使用了&lt;code&gt;--no-metadata&lt;/code&gt;的话，提交信息会变得更加简单且可读性更好，因为去掉了对应关系。&lt;/p&gt;
&lt;p&gt;简单说，如果需要想SVN提交信息，不要这个参数，如果只是迁移SVN记录到GIT，那么使用此参数。&lt;/p&gt;
&lt;h2 id=&quot;Git配置&quot;&gt;&lt;a href=&quot;#Git配置&quot; class=&quot;headerlink&quot; title=&quot;Git配置&quot;&gt;&lt;/a&gt;Git配置&lt;/h2&gt;&lt;p&gt;配置Git远程地址及本地信息：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 设置git的提交用户名和邮箱&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# --global参数是全局设定，如果是想当前项目设置，那么去除这个参数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git config --global user.name youname&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git config --global user.email email@email.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git remote add origin http://git.code.com/url/project-x.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;SVN获取更新&quot;&gt;&lt;a href=&quot;#SVN获取更新&quot; class=&quot;headerlink&quot; title=&quot;SVN获取更新&quot;&gt;&lt;/a&gt;SVN获取更新&lt;/h2&gt;&lt;p&gt;需要不定期从SVN拉取更新记录，并同步到GIT上：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git svn fetch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git svn rebase&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在这边通过检出&lt;code&gt;master&lt;/code&gt;分支，然后对svn拉取的代码进行合并。当然，如果需要的话，可以在其他分支进行合并。之后用&lt;code&gt;rebase&lt;/code&gt;将提交记录应用到分支上，构成线性提交记录。&lt;/p&gt;
&lt;h2 id=&quot;提交到SVN&quot;&gt;&lt;a href=&quot;#提交到SVN&quot; class=&quot;headerlink&quot; title=&quot;提交到SVN&quot;&gt;&lt;/a&gt;提交到SVN&lt;/h2&gt;&lt;p&gt;如果在&lt;code&gt;feature&lt;/code&gt;分支进行开发，之后需要提交到SVN上，有两个做法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;保留&lt;code&gt;feature&lt;/code&gt;分支的提交记录&lt;/li&gt;
&lt;li&gt;压缩&lt;code&gt;feature&lt;/code&gt;分支的提交记录，变成一个提交记录&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;保留提交记录&quot;&gt;&lt;a href=&quot;#保留提交记录&quot; class=&quot;headerlink&quot; title=&quot;保留提交记录&quot;&gt;&lt;/a&gt;保留提交记录&lt;/h3&gt;&lt;p&gt;只需要&lt;code&gt;rebase&lt;/code&gt;到svn的分支上，然后&lt;code&gt;dcommit&lt;/code&gt;提交到svn服务器。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# update svn code&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git svn fetch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git svn rebase&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# rebase feature to master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout feature&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git rebase master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# merge feature&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git merge feature&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git svn dcommit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;压缩提交&quot;&gt;&lt;a href=&quot;#压缩提交&quot; class=&quot;headerlink&quot; title=&quot;压缩提交&quot;&gt;&lt;/a&gt;压缩提交&lt;/h3&gt;&lt;p&gt;和上面区别就是，拉取feature之后，没有人在master上进行提交，直接使用merge进行fast-forward合并，然后提交到SVN服务器。&lt;/p&gt;
&lt;p&gt;如果你在master上面进行提交，而有人也在SVN上进行提交，这时GIT无法进行fast-forward合并，只能进行merge三方合并，之后把之前提交变成一个提交，推送到SVN服务器。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git svn rebase&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git merge feature&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git svn dcommit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h1&gt;&lt;p&gt;很麻烦，趁早用GIT吧！！！&lt;/p&gt;
&lt;h1 id=&quot;REF&quot;&gt;&lt;a href=&quot;#REF&quot; class=&quot;headerlink&quot; title=&quot;REF&quot;&gt;&lt;/a&gt;REF&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://www.janosgyerik.com/practical-tips-for-using-git-with-large-subversion-repositories/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Practical tips for using Git with large Subversion repositories&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://git-scm.com/book/zh/v1/Git-%E4%B8%8E%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F-%E8%BF%81%E7%A7%BB%E5%88%B0-Git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git - 迁移到 Git&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.chenyudong.com/archives/git-and-svn-collaboration.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;git与svn 共舞 | 东东东 陈煜东的博客&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      从SVN迁移项目到GIT下面进行研发，但是由于团队原因，需要将GIT下面的提交也定期同步到SVN项目下，所以就有了这篇文章（git-svn）。
    
    </summary>
    
      <category term="Git" scheme="https://hwangjr.github.io/categories/Git/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Git" scheme="https://hwangjr.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>AI(Appreciative Inquiry / 欣赏式探询) 初探</title>
    <link href="https://hwangjr.github.io/2016/05/10/AI-Appreciative-Inquiry-%E6%AC%A3%E8%B5%8F%E5%BC%8F%E6%8E%A2%E8%AF%A2-%E5%88%9D%E6%8E%A2/"/>
    <id>https://hwangjr.github.io/2016/05/10/AI-Appreciative-Inquiry-欣赏式探询-初探/</id>
    <published>2016-05-10T07:37:11.000Z</published>
    <updated>2016-06-27T03:05:34.987Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction&quot;&gt;&lt;/a&gt;Introduction&lt;/h1&gt;&lt;p&gt;欣赏式探询（Appreciative Inquiry），就是搜寻组织内以及其他相关群体世界中最好、最美的一面，由此实现个人与群体、成员与组织的共同发展。&lt;/p&gt;
&lt;p&gt;过去，在组织发展领域，无论是企业管理者还是管理顾问，都是从缺陷着手，去寻找组织当中哪里有问题，什么是弱点或短板，然后着手去修正。而欣赏式探询中没有否定、批评和教育，取而代之的是，新知探索、梦想构筑和愿景设计。&lt;/p&gt;
&lt;p&gt;欣赏式探询的核心理念是：每一个充满活力的组织系统都有许多尚未开发的、激动人心的积极资产。将这些资产组合到一起，就能找到“积极的变革核心（Positive Change Core）”，这是让“欣赏式探询”真正起作用的因素。将“积极变革核心”的能量直接释放于任何一项变革进程，就会发现：即便是那些从前认为绝不可能发生的变化，突然之间也有了转机。在这里看不到任何外力的压迫作用，完全是内在自发的自由民主式过程。&lt;/p&gt;
&lt;p&gt;A（Appreciative）：双重含义，1为赏识、鉴赏、感激；二为增值、涨价。同义词包括：重视（value）、奖赏（prize）、尊重（esteem）、荣誉（honor）。&lt;br&gt;I（Inquiry）：双重含义，1为探索和发现的行为；二为提问，对发现新的潜力与可能性保持开放。同义词包括：发现（discover）、搜索（search）、系统地探索（systematically explore）、研究（study）。&lt;/p&gt;
&lt;p&gt;解决问题（组织是等着被解决的问题）：&lt;br&gt;指出问题 -&amp;gt; 分析成因 -&amp;gt; 分析可能的解决方案 -&amp;gt; 行动计划（改进方案）&lt;/p&gt;
&lt;p&gt;欣赏式探询（组织是应该被拥抱的奇迹）：&lt;br&gt;欣赏和重视（“现在”最好的） -&amp;gt; 想象（可能会是什么） -&amp;gt; 讨论（应该是什么） -&amp;gt; 创新打造（将会是什么）&lt;/p&gt;
&lt;p&gt;思维的转变：&lt;br&gt;No problem can be solved from the same level of consciousness that created it. We must learn to see the world anew.&lt;br&gt;同一个观念并不能解决任何由它引起的问题，我们必须学会用新的眼光去看这个世界。&lt;br&gt;There are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.&lt;br&gt;有两种对待生活的方法，一是把什么都不看成奇迹，一是把什么都看成奇迹。&lt;br&gt;– 爱因斯坦&lt;/p&gt;
&lt;p&gt;AI是围绕优势建立的变革方式&lt;br&gt;AI是一种自觉的革命范式&lt;br&gt;AI秉承“精诚合作、共同发展”的理念，将人群组织或社区视为一个有机的生命体，通过系统地发现赋予并激活组织生命最大效率与能力的经济、生态和人性方面的优势，谋求个人、组织及其外部世界的美好未来。&lt;/p&gt;
&lt;h1 id=&quot;五大原则&quot;&gt;&lt;a href=&quot;#五大原则&quot; class=&quot;headerlink&quot; title=&quot;五大原则&quot;&gt;&lt;/a&gt;五大原则&lt;/h1&gt;&lt;h2 id=&quot;诠释原则（Constructionist-Principle）&quot;&gt;&lt;a href=&quot;#诠释原则（Constructionist-Principle）&quot; class=&quot;headerlink&quot; title=&quot;诠释原则（Constructionist Principle）&quot;&gt;&lt;/a&gt;诠释原则（Constructionist Principle）&lt;/h2&gt;&lt;p&gt;地图不等于强域；看到的现实是来自于我们的选择与诠释&lt;/p&gt;
&lt;p&gt;组织的前途命运与组织成员的知识经验是交织在一起的，要想成为一个高效的经理人、领导者或者变革家，就一定要擅于像对待有机人体那样，去理解、解读和分析自己的组织。&lt;/p&gt;
&lt;h2 id=&quot;诗歌原则（Poetic-Principle）&quot;&gt;&lt;a href=&quot;#诗歌原则（Poetic-Principle）&quot; class=&quot;headerlink&quot; title=&quot;诗歌原则（Poetic Principle）&quot;&gt;&lt;/a&gt;诗歌原则（Poetic Principle）&lt;/h2&gt;&lt;p&gt;注意力就是能量；专注在成功，就会创造出更多成功&lt;/p&gt;
&lt;p&gt;我们与其将人类社会组织比作一部机器，到不如说它是一本打开的书。一个组织的故事，是由它的所有成员持续不断共同写就的。而且，在这一“写作”过程中，过去、现在、未来无始无终，学习、感悟和判解也永不停息。这就恰好像人们对一段曼妙诗篇、经文的注解，永远没有尽头，不断有新的内容加入。&lt;/p&gt;
&lt;h2 id=&quot;并发原则（Principle-of-Simultaneity）&quot;&gt;&lt;a href=&quot;#并发原则（Principle-of-Simultaneity）&quot; class=&quot;headerlink&quot; title=&quot;并发原则（Principle of Simultaneity）&quot;&gt;&lt;/a&gt;并发原则（Principle of Simultaneity）&lt;/h2&gt;&lt;p&gt;改变发生在我们提问的同时；提问就是介入、就是引导&lt;/p&gt;
&lt;p&gt;欣赏式探询理论认为问询和变革并非是两个相对独立的时间过程，而是同时发生的。问询伊始，正常的发展过程即受到干涉，发展轨迹即受到影响。发生变革所需的火种，也就是人们谈论思考的话题、人们学习探索的新知，以及人们对话展望的动因，在提出问题的那一刹那就产生了。&lt;/p&gt;
&lt;h2 id=&quot;预想原则（Anticipatory-Principle）&quot;&gt;&lt;a href=&quot;#预想原则（Anticipatory-Principle）&quot; class=&quot;headerlink&quot; title=&quot;预想原则（Anticipatory Principle）&quot;&gt;&lt;/a&gt;预想原则（Anticipatory Principle）&lt;/h2&gt;&lt;p&gt;人往内在的未来形象移动，正向的未来形象，激发正向的行动&lt;/p&gt;
&lt;p&gt;预想原则关于组织生活的一个基本观点，正是那些描绘出来的未来图景，在指导组织、机体当下的实践活动。就像电影放映机总要投向前方的荧屏，人类系统的“放映机”亦永远投向未来与愿景。在人们所用的隐喻里和语言中，随处可见未来的影子，这使得未来成为一股作用于现实的强大的动员力量。&lt;/p&gt;
&lt;h2 id=&quot;积极原则（Positive-Principle）&quot;&gt;&lt;a href=&quot;#积极原则（Positive-Principle）&quot; class=&quot;headerlink&quot; title=&quot;积极原则（Positive Principle）&quot;&gt;&lt;/a&gt;积极原则（Positive Principle）&lt;/h2&gt;&lt;p&gt;发展强项比矫正弱点更有效果&lt;/p&gt;
&lt;p&gt;这项原则不像其他原则那么抽象，它从肯定式探询多年的实践中来。我们发现：在工作中，提问的方式愈加积极，我们的变革努力将愈加成功与持久。而用那种世界充满矛盾的消极态度提问，结果往往是于事无补。我们如果能够像谦恭的门徒那样，永远保持积极的探询之心，将变得更加强壮、聪慧与高效。&lt;/p&gt;
&lt;h2 id=&quot;整体性原则（Wholeness-Principle）（新增）&quot;&gt;&lt;a href=&quot;#整体性原则（Wholeness-Principle）（新增）&quot; class=&quot;headerlink&quot; title=&quot;整体性原则（Wholeness Principle）（新增）&quot;&gt;&lt;/a&gt;整体性原则（Wholeness Principle）（新增）&lt;/h2&gt;&lt;p&gt;我们都是更大整体的一部分，整体大于部分的总和&lt;/p&gt;
&lt;h2 id=&quot;预演性原则（Enactment-Principle）（新增）&quot;&gt;&lt;a href=&quot;#预演性原则（Enactment-Principle）（新增）&quot; class=&quot;headerlink&quot; title=&quot;预演性原则（Enactment Principle）（新增）&quot;&gt;&lt;/a&gt;预演性原则（Enactment Principle）（新增）&lt;/h2&gt;&lt;p&gt;试着先成为我们想看到的那个改变；彩排未来，借假修真&lt;/p&gt;
&lt;h2 id=&quot;自主性原则（Free-Choice-Principle）（新增）&quot;&gt;&lt;a href=&quot;#自主性原则（Free-Choice-Principle）（新增）&quot; class=&quot;headerlink&quot; title=&quot;自主性原则（Free Choice Principle）（新增）&quot;&gt;&lt;/a&gt;自主性原则（Free Choice Principle）（新增）&lt;/h2&gt;&lt;p&gt;自由让人们选择将更有责任感；自主性激发卓越及正想改变&lt;/p&gt;
&lt;h1 id=&quot;4D&quot;&gt;&lt;a href=&quot;#4D&quot; class=&quot;headerlink&quot; title=&quot;4D&quot;&gt;&lt;/a&gt;4D&lt;/h1&gt;&lt;p&gt;新知探索（Discovery）：是什么使生命生机盎然？肯定。揭示正面的能力，发现积极变革核心，动员整个系统，使所有利益相关者都参与进来。找出各种优势和最佳实践及其相互关系。确定“我们过去和现在最为成功的要素”。调动整个系统，进入积极探询的变革核心。&lt;/p&gt;
&lt;p&gt;梦想梦想（Dream）：我们期待发生什么？预想结果。如何应用“积极变革核心”去创造企业的未来，结合发现的潜能和更高的目标，诸如“我们存在于世所欲为何”，创造一个清晰的结果导向的愿景。基于业已发现的潜能，围绕更高的追求，构筑清晰的梦境。例如，问一问自己：“今天的世界要求我们如何应对明天的挑战？”“通过今天的不懈努力，明天的我们又将会变成怎样？”&lt;/p&gt;
&lt;p&gt;组织设计（Design）：理想的状况是什么？共同构建。在现实中如何创造理想的组织、架构和系统，理清理想中的组织所需具备的各种条件，进行组织设计，以使人们可以利用并放大“积极的变革核心”，实现全新的梦想。就如何构建理想化组织，提出各种建议。在这样的组织内，每一名成员要既能自由释放推动组织变革的积极潜能，又能自由实现自己构筑的梦想。&lt;/p&gt;
&lt;p&gt;把握命运（Destiny）：如何授权、学习与调整？维持。增强整个系统的“肯定能力”（Affirmative Capability）。使其树立希望，维持持续进行积极变革和改善绩效的动力。进一步强化整个系统积极肯定的性征，满怀希望和动力，去实现更为远大的组织目标。在此过程中，组织成员的学习、调整和提高此时已经成为自觉的行为习惯，就好像爵士乐队的即兴演。&lt;/p&gt;
&lt;h1 id=&quot;例子&quot;&gt;&lt;a href=&quot;#例子&quot; class=&quot;headerlink&quot; title=&quot;例子&quot;&gt;&lt;/a&gt;例子&lt;/h1&gt;&lt;h2 id=&quot;Check-In&quot;&gt;&lt;a href=&quot;#Check-In&quot; class=&quot;headerlink&quot; title=&quot;Check In&quot;&gt;&lt;/a&gt;Check In&lt;/h2&gt;&lt;p&gt;姓名、心情、期待&lt;br&gt;我们所关注的事情，最终一定会实现。&lt;/p&gt;
&lt;h2 id=&quot;参与原则&quot;&gt;&lt;a href=&quot;#参与原则&quot; class=&quot;headerlink&quot; title=&quot;参与原则&quot;&gt;&lt;/a&gt;参与原则&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;真诚倾听&lt;/li&gt;
&lt;li&gt;做自己的老师&lt;/li&gt;
&lt;li&gt;yes … and …&lt;/li&gt;
&lt;li&gt;看待彼此都是一个宝藏&lt;/li&gt;
&lt;li&gt;打开心扉&lt;br&gt;重视彼此的差异是非常重要的。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;AI-Workshop-Agenda&quot;&gt;&lt;a href=&quot;#AI-Workshop-Agenda&quot; class=&quot;headerlink&quot; title=&quot;AI Workshop Agenda&quot;&gt;&lt;/a&gt;AI Workshop Agenda&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Check-in &amp;amp; warm-up&lt;/li&gt;
&lt;li&gt;画出你人生闪光点（包括个人成长过程和职业生涯）（探索）&lt;/li&gt;
&lt;li&gt;结对互相介绍你的个人闪光点&lt;/li&gt;
&lt;li&gt;石头汤的故事&lt;/li&gt;
&lt;li&gt;高峰访谈个人梦想和目标（梦想 &amp;amp; 设计 &amp;amp; 实现）&lt;/li&gt;
&lt;li&gt;团队目标探索&lt;/li&gt;
&lt;li&gt;实现当下：团队目标。实现三部曲&lt;/li&gt;
&lt;li&gt;总结你的一句人生信念或格言&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;当人们能够带着他们的过去（已知）向未来（未知）进发，他们就会更有信心，也更自在。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;欣赏式访谈（Appreciate interview）&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;一对一的深度对话，涉及巅峰体验、珍视的事物、希望和梦想&lt;/li&gt;
&lt;li&gt;访谈要领：星探心态、闪光时刻的画面、挖掘宝藏、聆听 + 探询&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如果我们要带着过去的一部分走向未来，那就应该带最好的那一部分。&lt;/p&gt;
&lt;h2 id=&quot;石头汤&quot;&gt;&lt;a href=&quot;#石头汤&quot; class=&quot;headerlink&quot; title=&quot;石头汤&quot;&gt;&lt;/a&gt;石头汤&lt;/h2&gt;&lt;p&gt;我们相信，一块石头，也能煮出一锅鲜美可口的汤；我们相信，每个人都有光，每个人都蕴藏极大潜能。不是石头神奇，而是当人们愿意聚在一起，而且一起相信，一起投入，魔法就会无处不在。&lt;/p&gt;
&lt;p&gt;在每个社会、组织或团队，一定有某些行的通的运作方法。&lt;/p&gt;
&lt;h2 id=&quot;团队目标探索&quot;&gt;&lt;a href=&quot;#团队目标探索&quot; class=&quot;headerlink&quot; title=&quot;团队目标探索&quot;&gt;&lt;/a&gt;团队目标探索&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;分组，每组2-3人&lt;/li&gt;
&lt;li&gt;回顾过去团队成功的经验和闪光的时刻（探索）&lt;/li&gt;
&lt;li&gt;小组总结团队目标（梦想）&lt;/li&gt;
&lt;li&gt;如果你确定那是你想要的未来，此时此刻的你想要问自己或问团队的一句话是什么？&lt;/li&gt;
&lt;li&gt;整个团队发表，投票探索团队目标（设计 &amp;amp; 实现）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;只要对团队或组织提出问题，都会在某个方面影响这个团队。&lt;/p&gt;
&lt;p&gt;实境是当下创造出来的，而且没一个当下都有多重的实境。&lt;br&gt;我们所使用的语言，创造出我们的实境。&lt;/p&gt;
&lt;h2 id=&quot;另一个小例子&quot;&gt;&lt;a href=&quot;#另一个小例子&quot; class=&quot;headerlink&quot; title=&quot;另一个小例子&quot;&gt;&lt;/a&gt;另一个小例子&lt;/h2&gt;&lt;p&gt;在每次的会议上，让大家围坐成一圈，各自就下面几个议题，依四个层次发表个人的感想。如果参与者不想发言也不勉强。&lt;/p&gt;
&lt;p&gt;首先，由主持人自己先陈述，他自己感觉有哪些事做得很好，好在哪里？包括不为人知的准备工作。接着，由其他的参与者对于主持人发言进行回馈，他有哪些表现得很好，好在哪里？然后，再由主持人自己总结，如果下一次再有机会，他会做什么不同的“变化”？最后，由其他的参与者对于主持人的总结进行反馈，如果下一次再有机会，自己又应该做什么不同的变化？&lt;/p&gt;
&lt;p&gt;经过以上四个步骤，不但激励了主持人朝向开放进步发展，更塑造了集体正向思考的氛围，减少了竞争和批判，增进了了解和合作。如此，人人主动，真诚地为愿景服务，在日积月累之下，组织文化得以正向能量转化，开放智慧所引动的凝聚力才真正发挥1+1&amp;gt;2的效果。&lt;/p&gt;
&lt;p&gt;可见，在欣赏式探询的组织内，组织成员互相欣赏对方的优点和长处，采用积极肯定的态度，去分享对方的人生梦想和终极关怀，大家同心同德，携手共同创造一个崭新的世界，一个更加美好的世界。而“欣赏式探询”尤为突出的地方在于，它能够鼓动组织中的人们提出“积极的问题”，激发集体智慧，它是以激发、动员、探询优势为导向的积极的变革模式。&lt;/p&gt;
&lt;h1 id=&quot;AI的八个假设&quot;&gt;&lt;a href=&quot;#AI的八个假设&quot; class=&quot;headerlink&quot; title=&quot;AI的八个假设&quot;&gt;&lt;/a&gt;AI的八个假设&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;在每个社会、组织或团队，一定有某些行的通的运作方法&lt;/li&gt;
&lt;li&gt;我们所关注的事情，最终一定会实现&lt;/li&gt;
&lt;li&gt;实境是当下创造出来的，而且每一个当下都有多重的实境&lt;/li&gt;
&lt;li&gt;只要对团队或组织提出问题，都会在某个方面影响这个团队&lt;/li&gt;
&lt;li&gt;当人们能够带着他们的过去（已知）向未来（未知）进发，他们就会更有信心，也更自在&lt;/li&gt;
&lt;li&gt;如果我们要带着过去一部分走向未来，那就应该带最好的那一部分&lt;/li&gt;
&lt;li&gt;重视彼此的差异，是非常重要的&lt;/li&gt;
&lt;li&gt;我们所使用的语言，创造出我们的实境&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      1. 你的世界，就是你注意到的世界（The Clues are right in front of your eyes）；2. 如果我们要带着过去的一部分走向未来，那就应该带最好的那一部分。
    
    </summary>
    
      <category term="AI" scheme="https://hwangjr.github.io/categories/AI/"/>
    
    
      <category term="scrum" scheme="https://hwangjr.github.io/tags/scrum/"/>
    
      <category term="AI" scheme="https://hwangjr.github.io/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>SSH的公钥</title>
    <link href="https://hwangjr.github.io/2016/05/10/SSH%E7%9A%84%E5%85%AC%E9%92%A5/"/>
    <id>https://hwangjr.github.io/2016/05/10/SSH的公钥/</id>
    <published>2016-05-10T07:36:01.000Z</published>
    <updated>2016-05-10T07:36:25.842Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;在开发中，经常在客户端生成密钥和公钥（&lt;code&gt;ssh-keygen -t rsa&lt;/code&gt;），将生成的公钥内容追加到服务器的&lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt;文件中，并重新加载服务器sshd服务。其中&lt;code&gt;gitolite&lt;/code&gt;就是使用这种机制。但是我们在配置时候，经常会遇到问题，配置完成之后，还需要输入密码，下面针对这个问题，进行分析排查。&lt;/p&gt;
&lt;h1 id=&quot;打怪兽&quot;&gt;&lt;a href=&quot;#打怪兽&quot; class=&quot;headerlink&quot; title=&quot;打怪兽&quot;&gt;&lt;/a&gt;打怪兽&lt;/h1&gt;&lt;h2 id=&quot;怪兽显形&quot;&gt;&lt;a href=&quot;#怪兽显形&quot; class=&quot;headerlink&quot; title=&quot;怪兽显形&quot;&gt;&lt;/a&gt;怪兽显形&lt;/h2&gt;&lt;p&gt;还记得年轻时候，搭建了个&lt;code&gt;gitolite&lt;/code&gt;服务，近期新配了本本，安装&lt;code&gt;openSUSE&lt;/code&gt;系统，在原来&lt;code&gt;Ubuntu&lt;/code&gt;上拷贝密钥到新本本发现无法正常clone，需要输入密码，由此展开一场惊心动魄的排查战争。&lt;/p&gt;
&lt;h2 id=&quot;怪兽跟踪&quot;&gt;&lt;a href=&quot;#怪兽跟踪&quot; class=&quot;headerlink&quot; title=&quot;怪兽跟踪&quot;&gt;&lt;/a&gt;怪兽跟踪&lt;/h2&gt;&lt;h3 id=&quot;第一步，gitolite&quot;&gt;&lt;a href=&quot;#第一步，gitolite&quot; class=&quot;headerlink&quot; title=&quot;第一步，gitolite&quot;&gt;&lt;/a&gt;第一步，&lt;code&gt;gitolite&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;由于是在&lt;code&gt;gitolite&lt;/code&gt;上引起的错误，自然而然谷歌关于&lt;code&gt;gitolite&lt;/code&gt;相关帖子，发现内容内容针对性不多，而且大部分是权限。仔细再次阅读&lt;code&gt;gitolite&lt;/code&gt;的&lt;code&gt;readme&lt;/code&gt;，会发现其实是通过在&lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt;里面加入公钥来达到通信，那么简单，应该就是&lt;code&gt;ssh&lt;/code&gt;连接出现问题了。&lt;/p&gt;
&lt;p&gt;在此期间发现&lt;a href=&quot;http://gitolite.com/gitolite/sts.html#stsapp1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ssh troubleshooting and tips&lt;/a&gt;：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is a quick checklist:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Make sure you’re being asked for a password and not a passphrase. Do not confuse or mistake a prompt saying &lt;code&gt;Enter passphrase for key &amp;#39;/home/sitaram/.ssh/id_rsa&amp;#39;:&lt;/code&gt; for a password prompt from the remote server!&lt;br&gt;When you create an ssh keypair using &lt;code&gt;ssh-keygen&lt;/code&gt;, you have the option of protecting it with a passphrase. When you subsequently use that keypair to access a remote host, your local ssh client needs to unlock the corresponding private key, and ssh will probably ask for the passphrase you set when you created the keypair.&lt;br&gt;You have two choices to avoid this prompt every time you try to use the private key. The first is to create keypairs without a passphrase (just hit enter when prompted for one). &lt;strong&gt;Be sure to add a passphrase later, once everything is working, using &lt;code&gt;ssh-keygen -p&lt;/code&gt;&lt;/strong&gt;.&lt;br&gt;The second is to use &lt;code&gt;ssh-agent&lt;/code&gt; (or &lt;code&gt;keychain&lt;/code&gt;, which in turn uses &lt;code&gt;ssh-agent&lt;/code&gt;) or something like that to manage your keys. Other than discussing one more potential trouble-spot with ssh-agent (see below), further discussion of ssh-agent/keychain is out of scope of this page.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ssh is very sensitive to permissions. An extremely conservative setup is given below, but be sure to do this on &lt;strong&gt;both the client and the server&lt;/strong&gt;:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; cd $HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; chmod go-rwx .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; chmod -R go-rwx .ssh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Actually, every component of the path to &lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt; all the way upto the root directory must be at least &lt;code&gt;chmod go-w&lt;/code&gt;. So be sure to check &lt;code&gt;/&lt;/code&gt; and &lt;code&gt;/home&lt;/code&gt; also.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;While you’re doing this, make sure the owner and group info for each of these components are correct. &lt;code&gt;ls -ald ~ ~/.ssh ~/.ssh/authorized_keys&lt;/code&gt; will tell you what they are.&lt;/li&gt;
&lt;li&gt;You may also want to check &lt;code&gt;/etc/ssh/sshd_config&lt;/code&gt; to see if the “git” user is allowed to login at all. For example, if that file contains an &lt;code&gt;AllowUsers&lt;/code&gt; config entry, then only users mentioned in that line are allowed to log in!&lt;/li&gt;
&lt;li&gt;While you’re in there, check that file does NOT have a setting for &lt;code&gt;AuthorizedKeysFile&lt;/code&gt;. See &lt;code&gt;man sshd_config&lt;/code&gt; for details. This setting is a show stopper for gitolite to use ssh.&lt;/li&gt;
&lt;li&gt;Some OSs/distributions require that the “git” user should have a password and/or not be a locked account. You may want to check that as well.&lt;/li&gt;
&lt;li&gt;If your server is running SELinux, and you install gitolite to &lt;code&gt;/var/gitolite&lt;/code&gt; or another location unsupported by default SELinux policies, then SELinux will prevent sshd from reading &lt;code&gt;.ssh/authorized_keys&lt;/code&gt;. Consider installing gitolite to &lt;code&gt;/var/lib/gitolite&lt;/code&gt;, which is a supported location by default SELinux policies.&lt;/li&gt;
&lt;li&gt;If all that fails, log onto the server as root, &lt;code&gt;cd /var/log&lt;/code&gt;, and look for a file called &lt;code&gt;auth.log&lt;/code&gt; or &lt;code&gt;secure&lt;/code&gt; or some such name. Look inside this file for messages matching the approximate time of your last attempt to login, to see if they tell you what is the problem.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;第二步，ssh配置&quot;&gt;&lt;a href=&quot;#第二步，ssh配置&quot; class=&quot;headerlink&quot; title=&quot;第二步，ssh配置&quot;&gt;&lt;/a&gt;第二步，&lt;code&gt;ssh&lt;/code&gt;配置&lt;/h3&gt;&lt;p&gt;在此期间做了几件事：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在&lt;code&gt;openSUSE&lt;/code&gt;上安装虚拟机&lt;code&gt;Ubuntu&lt;/code&gt;并进行&lt;code&gt;clone&lt;/code&gt;，发现正常&lt;/li&gt;
&lt;li&gt;在&lt;code&gt;openSUSE&lt;/code&gt;上生成密钥，并拷贝到&lt;code&gt;Ubuntu&lt;/code&gt;上，发现正常&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;由此判断，问题在&lt;code&gt;openSUSE&lt;/code&gt;系统配置上，检查&lt;code&gt;/etc/ssh/ssh_config&lt;/code&gt;文件配置，并与&lt;code&gt;Ubuntu&lt;/code&gt;配置进行判断，并没有发现特殊配置，且修改为一致也无法解决此问题。&lt;/p&gt;
&lt;p&gt;进行大规模尝试，包括将&lt;code&gt;.ssh&lt;/code&gt;权限修改为&lt;code&gt;0700&lt;/code&gt;，&lt;code&gt;authorized_keys&lt;/code&gt;和&lt;code&gt;id_rsa.pub&lt;/code&gt;权限修改为&lt;code&gt;0644&lt;/code&gt;，&lt;code&gt;id_rsa&lt;/code&gt;为&lt;code&gt;0600&lt;/code&gt;，但是不是权限问题。&lt;br&gt;进行排查是否是群组权限问题，通过修改用户群组，并未发现问题。&lt;/p&gt;
&lt;h3 id=&quot;第三步，大招&quot;&gt;&lt;a href=&quot;#第三步，大招&quot; class=&quot;headerlink&quot; title=&quot;第三步，大招&quot;&gt;&lt;/a&gt;第三步，大招&lt;/h3&gt;&lt;p&gt;经过上面进行解决之后，均无法发现问题，陷入疑惑，并进行咨询，排查信息。因为&lt;code&gt;gitolite&lt;/code&gt;其实也是通过&lt;code&gt;ssh&lt;/code&gt;来进行验证，那么其实是可以通过下面代码来进行验证并查看记录：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ssh -vvt git@xxx.xxx.xxx.xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh -v git@xxx.xxx.xxx.xxx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;排查发现，会默认寻找&lt;code&gt;id_rsa&lt;/code&gt;进行公钥验证，而在ubuntu上，会对公钥进行轮询并进行验证，在&lt;code&gt;openSUSE&lt;/code&gt;上将密钥修改为&lt;code&gt;id_rsa&lt;/code&gt;成功！&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;原来是这个基本问题，被自己蠢哭了！！！&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;解决&quot;&gt;&lt;a href=&quot;#解决&quot; class=&quot;headerlink&quot; title=&quot;解决&quot;&gt;&lt;/a&gt;解决&lt;/h2&gt;&lt;p&gt;简单处理，新增&lt;code&gt;~/.ssh/config&lt;/code&gt;文件，并针对各个key进行配置，上配置模板。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Host github.com  ##主机别名&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Hostname github.com  ##主机真实地址&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PreferredAuthentications publickey&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    IdentityFile ~/.ssh/git/tudouya_id_rsa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    User user&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Port port&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;或者使用&lt;code&gt;ssh-agent&lt;/code&gt;来解决。&lt;/p&gt;
&lt;h2 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;p&gt;&lt;code&gt;ssh&lt;/code&gt;配置文件为&lt;code&gt;/etc/ssh/ssh_config&lt;/code&gt;，&lt;code&gt;sshd&lt;/code&gt;配置&lt;code&gt;/etc/ssh/sshd_config&lt;/code&gt;，参数配置：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Port 22 &lt;/strong&gt;&lt;br&gt;“Port”设置sshd监听的端口号。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ListenAddress 192.168.1.1 &lt;/strong&gt;&lt;br&gt;“ListenAddress”设置sshd服务器绑定的IP地址。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HostKey /etc/ssh/ssh_host_key&lt;/strong&gt;&lt;br&gt;“HostKey”设置包含计算机私人密匙的文件。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ServerKeyBits 1024 &lt;/strong&gt;&lt;br&gt;“ServerKeyBits”定义服务器密匙的位数。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LoginGraceTime 600 &lt;/strong&gt;&lt;br&gt;“LoginGraceTime”设置如果用户不能成功登录，在切断连接之前服务器需要等待的时间（以秒为单位）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;KeyRegenerationInterval 3600 &lt;/strong&gt;&lt;br&gt;“KeyRegenerationInterval”设置在多少秒之后自动重新生成服务器的密匙（如果使用密匙）。重新生成密匙是为了防止用盗用的密匙解密被截获的信息。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PermitRootLogin no &lt;/strong&gt;&lt;br&gt;“PermitRootLogin”设置root能不能用ssh登录。这个选项一定不要设成“yes”。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;IgnoreRhosts yes &lt;/strong&gt;&lt;br&gt;“IgnoreRhosts”设置验证的时候是否使用“rhosts”和“shosts”文件。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;IgnoreUserKnownHosts yes &lt;/strong&gt;&lt;br&gt;“IgnoreUserKnownHosts”设置ssh daemon是否在进行RhostsRSAAuthentication安全验证的时候忽略用户的“$HOME/.ssh/known_hosts”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;StrictModes yes &lt;/strong&gt;&lt;br&gt;“StrictModes”设置ssh在接收登录请求之前是否检查用户家目录和rhosts文件的权限和所有权。这通常是必要的，因为新手经常会把自己的目录和文件设成任何人都有写权限。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;X11Forwarding no &lt;/strong&gt;&lt;br&gt;“X11Forwarding”设置是否允许X11转发。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PrintMotd yes &lt;/strong&gt;&lt;br&gt;“PrintMotd”设置sshd是否在用户登录的时候显示“/etc/motd”中的信息。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SyslogFacility AUTH &lt;/strong&gt;&lt;br&gt;“SyslogFacility”设置在记录来自sshd的消息的时候，是否给出“facility code”。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LogLevel INFO &lt;/strong&gt;&lt;br&gt;“LogLevel”设置记录sshd日志消息的层次。INFO是一个好的选择。查看sshd的man帮助页，已获取更多的信息。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;RhostsAuthentication no &lt;/strong&gt;&lt;br&gt;“RhostsAuthentication”设置只用rhosts或“/etc/hosts.equiv”进行安全验证是否已经足够了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;RhostsRSAAuthentication no &lt;/strong&gt;&lt;br&gt;“RhostsRSA”设置是否允许用rhosts或“/etc/hosts.equiv”加上RSA进行安全验证。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;RSAAuthentication yes &lt;/strong&gt;&lt;br&gt;“RSAAuthentication”设置是否允许只有RSA安全验证。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PasswordAuthentication yes &lt;/strong&gt;&lt;br&gt;“PasswordAuthentication”设置是否允许口令验证。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PermitEmptyPasswords no &lt;/strong&gt;&lt;br&gt;“PermitEmptyPasswords”设置是否允许用口令为空的帐号登录。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;AllowUsers admin &lt;/strong&gt;&lt;br&gt;“AllowUsers”的后面可以跟着任意的数量的用户名的匹配串（patterns）或user@host这样的匹配串，这些字符串用空格隔开。主机名可以是DNS名或IP地址。&lt;/p&gt;
&lt;h1 id=&quot;后记&quot;&gt;&lt;a href=&quot;#后记&quot; class=&quot;headerlink&quot; title=&quot;后记&quot;&gt;&lt;/a&gt;后记&lt;/h1&gt;&lt;p&gt;&lt;code&gt;SSH&lt;/code&gt;是很强大而安全的工具，使用它，了解它，完成各种任务！！！&lt;/p&gt;
&lt;h1 id=&quot;REF&quot;&gt;&lt;a href=&quot;#REF&quot; class=&quot;headerlink&quot; title=&quot;REF&quot;&gt;&lt;/a&gt;REF&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://gitolite.com/gitolite/sts.html#stsapp1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ssh troubleshooting and tips&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.robotgoblin.co.uk/blog/2012/07/24/managing-multiple-ssh-keys/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Managing Multiple SSH Keys » Robot Goblin&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.ibm.com/developerworks/cn/aix/library/au-sshsecurity/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SSH 安全性和配置入门&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://ruby-china.org/topics/14182&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SSH 上传公钥到服务器后还需要密码 » 社区 » Ruby China&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.php101.cn/2014/10/12/%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90ssh-key%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AAssh-key/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何生成ssh key以及使用多个ssh key | php101&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      在客户端生成密钥之后，将公钥上传到服务器，即可实现不用密码进行登陆，但是在这个过程中往往会出现问题。
    
    </summary>
    
      <category term="Linux" scheme="https://hwangjr.github.io/categories/Linux/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Linux" scheme="https://hwangjr.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>XMind In OpenSUSE</title>
    <link href="https://hwangjr.github.io/2016/05/10/XMind-In-OpenSUSE/"/>
    <id>https://hwangjr.github.io/2016/05/10/XMind-In-OpenSUSE/</id>
    <published>2016-05-10T07:34:41.000Z</published>
    <updated>2016-05-10T07:35:38.062Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Installation&quot;&gt;&lt;a href=&quot;#Installation&quot; class=&quot;headerlink&quot; title=&quot;Installation&quot;&gt;&lt;/a&gt;Installation&lt;/h1&gt;&lt;h2 id=&quot;Install-with-deb-package&quot;&gt;&lt;a href=&quot;#Install-with-deb-package&quot; class=&quot;headerlink&quot; title=&quot;Install with deb package&quot;&gt;&lt;/a&gt;Install with deb package&lt;/h2&gt;&lt;p&gt;Xmind does not provide a rpm package for Fedora user. you can install xmind in Fedora with debian deb package.&lt;br&gt;&lt;strong&gt;A:&lt;/strong&gt; download xmind deb package from ‘&lt;a href=&quot;http://www.xmind.net/downloads/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.xmind.net/downloads/&lt;/a&gt;‘&lt;br&gt;&lt;strong&gt;B:&lt;/strong&gt; uncompress deb package with ar: “ar -x xmind-x.x.x.xx.deb”&lt;br&gt;&lt;strong&gt;C:&lt;/strong&gt; Now we get 2 tar.gz package call ‘control.tar.gz’ and ‘data.tar.gz’&lt;br&gt;&lt;strong&gt;D:&lt;/strong&gt; untar data.tar.gz: “tar xf data.tar.gz”&lt;br&gt;&lt;strong&gt;E:&lt;/strong&gt; got a ‘usr’ dir in $PWD, cd $PWD/usr/local dir, copy ‘xmind’ dir to ‘/opt/‘, copy ‘share’ dir to ‘/usr’&lt;br&gt;&lt;strong&gt;F:&lt;/strong&gt; untar control.tar.gz: “tar xf control.tar.gz”&lt;br&gt;&lt;strong&gt;G:&lt;/strong&gt; got a shell script called ‘postinst’, execute ‘postinst’: “sh postinst”&lt;br&gt;&lt;strong&gt;H:&lt;/strong&gt; edit ‘/usr/share/applications/xmind.desktop’, change ‘/usr/local’ to ‘/opt’.&lt;br&gt;&lt;strong&gt;I:&lt;/strong&gt; Done, enjoy your xmind.&lt;/p&gt;
&lt;h2 id=&quot;Make-a-RPM-Package-Alien&quot;&gt;&lt;a href=&quot;#Make-a-RPM-Package-Alien&quot; class=&quot;headerlink&quot; title=&quot;Make a RPM Package (Alien)&quot;&gt;&lt;/a&gt;Make a RPM Package (Alien)&lt;/h2&gt;&lt;p&gt;Install Alien (Need to jump on the &lt;a href=&quot;https://software.opensuse.org/download.html?project=home%3AKAMiKAZOW&amp;amp;package=alien&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Kamikaz Repo&lt;/a&gt; of the openSUSE factory):&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;zypper addrepo http://download.opensuse.org/repositories/home:KAMiKAZOW/openSUSE_Leap_42.1/home:KAMiKAZOW.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;zypper refresh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;zypper install alien&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Then convert &lt;code&gt;deb&lt;/code&gt; to &lt;code&gt;rpm&lt;/code&gt;:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# alien -r --scripts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo alien -r -c xmind-7-update1-linux_amd64.deb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo zypper in xmind-7-update1-linux_amd64.rpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TIPS1&lt;/strong&gt;&lt;br&gt;if this situation occurs:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Package build failed. Here&amp;apos;s the log of the command (cd xmind-3.6.1; rpmbuild --buildroot=&amp;apos;/home/hwangjr/xmind-3.6.1&amp;apos; -bb --target x86_64 &amp;apos;xmind-3.6.1-2.spec&amp;apos;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sh: rpmbuild: command not found&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;then:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;zypper install rpmbuild&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TIPS2&lt;/strong&gt;&lt;br&gt;Apart from differences in desktop environments, one fundamental difference between Debian and Red Hat derived distributions (including SuSE) is whereas 64-bit libraries are installed under /lib and /usr/lib in Debian, they’re under /lib64 and /usr/lib64 in Red Hat. As a result some packages may refuse to install because they’re looking in the wrong place for their dependencies. This wasn’t an issue with Xmind because of its implementation as an Eclipse workbench application, and Red Hat’s locating of its 64-bit java binaries under &lt;code&gt;/usr/lib/jvm&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TIPS3&lt;/strong&gt;&lt;br&gt;if this occurs while installation:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Problem: nothing provides osgi(org.eclipse.ui.themes) needed by xmind-3.6.1-2.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; Solution 1: do not install xmind-3.6.1-2.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; Solution 2: break xmind-3.6.1-2.x86_64 by ignoring some of its dependencies&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;just ignore it ~&lt;/p&gt;
&lt;h1 id=&quot;REF&quot;&gt;&lt;a href=&quot;#REF&quot; class=&quot;headerlink&quot; title=&quot;REF&quot;&gt;&lt;/a&gt;REF&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://www.xmind.net/m/JKm6/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Install Xmind in Fedora with deb package&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://tunnelix.com/converting-a-deb-into-rpm-using-alien-on-opensuse/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Converting a deb into rpm using alien on openSUSE – Through out the tunnel&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://onemoretech.wordpress.com/2014/03/25/alien-invasions-making-an-xmind-rpm/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;alien invasions: making an xmind rpm | onemoretech&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.groesch.net/2014-02-08/alien-deb-rpm.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Thorsten Grösch - openSUSE &amp;amp; xmind: converting deb packages to rpm&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://forums.fedoraforum.org/showthread.php?t=308234&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Installing XMind7 - where do I find osgi? - FedoraForum.org&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      Installation of XMind in OpenSUSE.
    
    </summary>
    
      <category term="Linux" scheme="https://hwangjr.github.io/categories/Linux/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Linux" scheme="https://hwangjr.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Android HotFix方案</title>
    <link href="https://hwangjr.github.io/2016/03/02/Android-HotFix%E6%96%B9%E6%A1%88/"/>
    <id>https://hwangjr.github.io/2016/03/02/Android-HotFix方案/</id>
    <published>2016-03-02T12:14:44.000Z</published>
    <updated>2016-03-02T12:15:17.391Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;随着开发需求的不断迫切，目前开源已经涌现了很多Hot Fix项目，但是从方案上来说，主要是基于&lt;a href=&quot;https://github.com/rovo89/Xposed&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rovo89/Xposed&lt;/a&gt;的&lt;a href=&quot;https://github.com/alibaba/dexposed&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;alibaba/dexposed&lt;/a&gt;；以方法hook，从Field切入的&lt;a href=&quot;https://github.com/alibaba/AndFix&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AndFix&lt;/a&gt;；&lt;a href=&quot;http://bugly.qq.com/bbs/forum.php?mod=viewthread&amp;amp;tid=16&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Dex分包&lt;/a&gt;的&lt;a href=&quot;https://github.com/jasonross/Nuwa&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Nuwa&lt;/a&gt;。而相同原理的不同实现有很多，这里就不再累赘。这三个实现原理截然不同，各有各自优缺点，让我们走近这几个方案。&lt;/p&gt;
&lt;h1 id=&quot;方案揭秘&quot;&gt;&lt;a href=&quot;#方案揭秘&quot; class=&quot;headerlink&quot; title=&quot;方案揭秘&quot;&gt;&lt;/a&gt;方案揭秘&lt;/h1&gt;&lt;h2 id=&quot;Dexposed&quot;&gt;&lt;a href=&quot;#Dexposed&quot; class=&quot;headerlink&quot; title=&quot;Dexposed&quot;&gt;&lt;/a&gt;Dexposed&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/alibaba/dexposed&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;alibaba/dexposed&lt;/a&gt;是基于&lt;a href=&quot;https://github.com/rovo89/Xposed&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rovo89/Xposed&lt;/a&gt;的AOP框架，方法级别粒度，而且不仅可以Hot Fix，还可进行AOP编程、插桩、Hook等功能。&lt;/p&gt;
&lt;p&gt;Xposed是需要ROOT权限，因为其要修改其他应用及系统行为，而对于单个应用而言，不需要ROOT。Xposed基本原理是：通过修改Dalvik运行时的Zygote进程，使用Xposed Bridge来hook方法并注入自身代码，实现非侵入式的Runtime修改。包括小米（&lt;a href=&quot;https://github.com/rovo89/Xposed/blob/master/libxposed_dalvik.cpp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;onVmCreated方法&lt;/a&gt;），也利用此特性，做了自定义主题、沉浸式状态栏等功能。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/** Called very early during VM startup. */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;void onVmCreated(JNIEnv* env) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!initMemberOffsets(env))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jclass classMiuiResources = env-&amp;gt;FindClass(CLASS_MIUI_RESOURCES);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (classMiuiResources != NULL) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ClassObject* clazz = (ClassObject*)dvmDecodeIndirectRef(dvmThreadSelf(), classMiuiResources);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (dvmIsFinalClass(clazz)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ALOGD(&amp;quot;Removing final flag for class &amp;apos;%s&amp;apos;&amp;quot;, CLASS_MIUI_RESOURCES);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            clazz-&amp;gt;accessFlags &amp;amp;= ~ACC_FINAL;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    env-&amp;gt;ExceptionClear();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;应用启动时，会fork zygote进程，装载class和invoke各种初始化方法，Xposed就是在这个过程替换了app_process，hook各个入口方法，加载XposedBridge.jar提供动态hook基础，具体查看&lt;a href=&quot;https://github.com/rovo89/XposedBridge&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;XposedBridge&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;具体的Native实现则是在&lt;a href=&quot;https://github.com/rovo89/Xposed/blob/master/libxposed_common.cpp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;libxposed_common.cpp&lt;/a&gt;里面，根据系统版本进行分发到libxposed_dalvik或libxposed_art，记录下原来方法信息，将方法指针指向hookedMethodCallback，从而达到劫持目的。&lt;/p&gt;
&lt;p&gt;此方式只能对JAVA方法做拦截，不支持C方法。如果线上RELEASE版本进行混淆，patch也是一个痛苦事情，反射和内部类、包名和内部类冲突等处理很繁琐。&lt;/p&gt;
&lt;p&gt;针对Xposed&lt;strong&gt;不支持ART&lt;/strong&gt;这个事情，现在应该已经解决了，具体移步&lt;a href=&quot;https://github.com/rovo89/android_art&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rovo89/android_art&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id=&quot;AndFix&quot;&gt;&lt;a href=&quot;#AndFix&quot; class=&quot;headerlink&quot; title=&quot;AndFix&quot;&gt;&lt;/a&gt;AndFix&lt;/h2&gt;&lt;p&gt;简单来说，主要通过补丁工具，利用注解等，描述其与要打补丁的类和方法的对应关系，之后在应用中，加载并替换方法的信息和指针，从而达到热修复目的。里面的实现可能还涉及到其他的部分，比如Security检查、PATCH覆盖等。&lt;/p&gt;
&lt;p&gt;化繁为简，直接上核心代码，先以ART（不同版本差异不大，以6.0为例）为例：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void replace_6_0(JNIEnv* env, jobject src, jobject dest) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	art::mirror::ArtMethod* smeth =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			(art::mirror::ArtMethod*) env-&amp;gt;FromReflectedMethod(src);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	art::mirror::ArtMethod* dmeth =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			(art::mirror::ArtMethod*) env-&amp;gt;FromReflectedMethod(dest);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dmeth-&amp;gt;declaring_class_-&amp;gt;class_loader_ =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			smeth-&amp;gt;declaring_class_-&amp;gt;class_loader_; //for plugin classloader&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dmeth-&amp;gt;declaring_class_-&amp;gt;clinit_thread_id_ =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			smeth-&amp;gt;declaring_class_-&amp;gt;clinit_thread_id_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dmeth-&amp;gt;declaring_class_-&amp;gt;status_ = smeth-&amp;gt;declaring_class_-&amp;gt;status_-1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 修改原方法属性为补丁方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;declaring_class_ = dmeth-&amp;gt;declaring_class_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;dex_cache_resolved_types_ = dmeth-&amp;gt;dex_cache_resolved_types_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;access_flags_ = dmeth-&amp;gt;access_flags_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;dex_cache_resolved_methods_ = dmeth-&amp;gt;dex_cache_resolved_methods_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;dex_code_item_offset_ = dmeth-&amp;gt;dex_code_item_offset_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;method_index_ = dmeth-&amp;gt;method_index_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;dex_method_index_ = dmeth-&amp;gt;dex_method_index_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 修改实现指针&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;ptr_sized_fields_.entry_point_from_interpreter_ =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			dmeth-&amp;gt;ptr_sized_fields_.entry_point_from_interpreter_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;ptr_sized_fields_.entry_point_from_jni_ =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			dmeth-&amp;gt;ptr_sized_fields_.entry_point_from_jni_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	smeth-&amp;gt;ptr_sized_fields_.entry_point_from_quick_compiled_code_ =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			dmeth-&amp;gt;ptr_sized_fields_.entry_point_from_quick_compiled_code_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LOGD(&amp;quot;replace_6_0: %d , %d&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			smeth-&amp;gt;ptr_sized_fields_.entry_point_from_quick_compiled_code_,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			dmeth-&amp;gt;ptr_sized_fields_.entry_point_from_quick_compiled_code_);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 将方法修改为PUBLIC&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;void setFieldFlag_6_0(JNIEnv* env, jobject field) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	art::mirror::ArtField* artField =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			(art::mirror::ArtField*) env-&amp;gt;FromReflectedField(field);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	artField-&amp;gt;access_flags_ = artField-&amp;gt;access_flags_ &amp;amp; (~0x0002) | 0x0001;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LOGD(&amp;quot;setFieldFlag_6_0: %d &amp;quot;, artField-&amp;gt;access_flags_);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在Dalvik上的实现略有不同，先指向到&lt;code&gt;dalvik_dispatcher&lt;/code&gt;，之后在里面进行补丁方法的调用和返回，也就是通过JNI Bridge来指向补丁方法。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;extern void __attribute__ ((visibility (&amp;quot;hidden&amp;quot;))) dalvik_replaceMethod(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		JNIEnv* env, jobject src, jobject dest) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	jobject clazz = env-&amp;gt;CallObjectMethod(dest, jClassMethod);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ClassObject* clz = (ClassObject*) dvmDecodeIndirectRef_fnPtr(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			dvmThreadSelf_fnPtr(), clazz);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	clz-&amp;gt;status = CLASS_INITIALIZED;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Method* meth = (Method*) env-&amp;gt;FromReflectedMethod(src);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Method* target = (Method*) env-&amp;gt;FromReflectedMethod(dest);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LOGD(&amp;quot;dalvikMethod: %s&amp;quot;, meth-&amp;gt;name);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	meth-&amp;gt;jniArgInfo = 0x80000000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	meth-&amp;gt;accessFlags |= ACC_NATIVE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 将目标方法赋值到附带值上&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	int argsSize = dvmComputeMethodArgsSize_fnPtr(meth);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (!dvmIsStaticMethod(meth))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		argsSize++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	meth-&amp;gt;registersSize = meth-&amp;gt;insSize = argsSize;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	meth-&amp;gt;insns = (void*) target;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 指向本地的dispatcher方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	meth-&amp;gt;nativeFunc = dalvik_dispatcher;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;static void dalvik_dispatcher(const u4* args, jvalue* pResult,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		const Method* method, void* self) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ClassObject* returnType;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	jvalue result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ArrayObject* argArray;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LOGD(&amp;quot;dalvik_dispatcher source method: %s %s&amp;quot;, method-&amp;gt;name,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			method-&amp;gt;shorty);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Method* meth = (Method*) method-&amp;gt;insns;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	meth-&amp;gt;accessFlags = meth-&amp;gt;accessFlags | ACC_PUBLIC;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LOGD(&amp;quot;dalvik_dispatcher target method: %s %s&amp;quot;, method-&amp;gt;name,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			method-&amp;gt;shorty);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	returnType = dvmGetBoxedReturnType_fnPtr(method);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (returnType == NULL) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		assert(dvmCheckException_fnPtr(self));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		goto bail;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LOGD(&amp;quot;dalvik_dispatcher start call-&amp;gt;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 是否静态方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (!dvmIsStaticMethod(meth)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		Object* thisObj = (Object*) args[0];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		ClassObject* tmp = thisObj-&amp;gt;clazz;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		thisObj-&amp;gt;clazz = meth-&amp;gt;clazz;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		argArray = boxMethodArgs(meth, args + 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		if (dvmCheckException_fnPtr(self))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			goto bail;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // 调用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		dvmCallMethod_fnPtr(self, (Method*) jInvokeMethod,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				dvmCreateReflectMethodObject_fnPtr(meth), &amp;amp;result, thisObj,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				argArray);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		thisObj-&amp;gt;clazz = tmp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		argArray = boxMethodArgs(meth, args);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		if (dvmCheckException_fnPtr(self))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			goto bail;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // 调用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		dvmCallMethod_fnPtr(self, (Method*) jInvokeMethod,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				dvmCreateReflectMethodObject_fnPtr(meth), &amp;amp;result, NULL,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				argArray);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (dvmCheckException_fnPtr(self)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		Object* excep = dvmGetException_fnPtr(self);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		jni_env-&amp;gt;Throw((jthrowable) excep);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		goto bail;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (returnType-&amp;gt;primitiveType == PRIM_VOID) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		LOGD(&amp;quot;+++ ignoring return to void&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; else if (result.l == NULL) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		if (dvmIsPrimitiveClass(returnType)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			jni_env-&amp;gt;ThrowNew(NPEClazz, &amp;quot;null result when primitive expected&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			goto bail;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		pResult-&amp;gt;l = NULL;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		if (!dvmUnboxPrimitive_fnPtr(result.l, returnType, pResult)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			char msg[1024] = &amp;#123; 0 &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			snprintf(msg, sizeof(msg) - 1, &amp;quot;%s!=%s\0&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;					((Object*) result.l)-&amp;gt;clazz-&amp;gt;descriptor,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;					returnType-&amp;gt;descriptor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			jni_env-&amp;gt;ThrowNew(CastEClazz, msg);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			goto bail;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	bail: dvmReleaseTrackedAlloc_fnPtr((Object*) argArray, self);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;Multiple-Dex&quot;&gt;&lt;a href=&quot;#Multiple-Dex&quot; class=&quot;headerlink&quot; title=&quot;Multiple Dex&quot;&gt;&lt;/a&gt;Multiple Dex&lt;/h2&gt;&lt;p&gt;Multiple Dex的方案原来是为了突破65535的限制，其就是将多个Dex放到应用的ClassLoader之中，从而使所有的Dex的类都能被找到。实际上，在&lt;code&gt;findClass&lt;/code&gt;过程中，如果重复的类，参照下面的类加载的实现，是会使用第一个找到的类。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public Class findClass(String name, List&amp;lt;Throwable&amp;gt; suppressed) &amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (Element element : dexElements) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        DexFile dex = element.dexFile;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (dex != null) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Class clazz = dex.loadClassBinaryName(name, definingContext, suppressed);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (clazz != null) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              return clazz;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (dexElementsSuppressedExceptions != null) &amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        suppressed.addAll(Arrays.asList(dexElementsSuppressedExceptions));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;而方法过多的原因其实也很明显：因为在Dalvik指令集里，调用方法的&lt;code&gt;invoke-kind&lt;/code&gt;指令中，method reference index只给了16bits，最多能调用65535个方法，所以在生成Dex文件的过程中，当方法数超过65535就会报错。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This number is significant in that it represents the total number of references that can be invoked by the code within a single Dalvik Executable (dex) bytecode file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;该方法就是从这入手，将问题修复后，放到一个单独的Dex中，通过反射插入到&lt;code&gt;dexElements&lt;/code&gt;数组的最前面，完成虚拟机打补丁的操作。&lt;/p&gt;
&lt;p&gt;在此方案中，有一个问题就是，在运行加载类的时候会报&lt;code&gt;preverified&lt;/code&gt;错误，在&lt;code&gt;DexPrepare.cpp&lt;/code&gt;中，将Dex转化为ODex过程中，会在&lt;code&gt;DexVerify.cpp&lt;/code&gt;中进行校验，验证如果直接引用到的类和clazz是否在同一个Dex，如果是则会打上&lt;code&gt;CLASS_ISPREVERIFIED&lt;/code&gt;标志。通过在所有类（Application除外，此时还没加载自定义代码）的构造函数中插入一个对在单独Dex类的引用，来解决此问题。在空间中，是使用&lt;code&gt;javaassist&lt;/code&gt;进行编译时字节码插入。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;当一个apk在安装的时候，apk中的classes.dex会被虚拟机(dexopt)优化成odex文件，然后才会拿去执行。&lt;br&gt;虚拟机在启动的时候，会有许多的启动参数，其中一项就是verify选项，当verify选项被打开的时候，就会执行dvmVerifyClass进行类的校验，如果dvmVerifyClass校验类成功，那么这个类会被打上CLASS_ISPREVERIFIED的标志。&lt;br&gt;怎么样算是校验类成功？如果static方法、private方法、构造函数等，其中的直接引用（第一层关系）到的类都在同一个Dex文件中，那么该类就会被打上CLASS_ISPREVERIFIED标志。&lt;br&gt;我们要做的就是，阻止该类打上CLASS_ISPREVERIFIED的标志。否则加载其他Dex的时候会报错。&lt;br&gt;注意下，是阻止引用者的类，也就是说，假设你的app里面有个类叫做LoadBugClass，再其内部引用了BugClass。发布过程中发现BugClass有编写错误，那么想要发布一个新的BugClass类，那么你就要阻止LoadBugClass这个类打上CLASS_ISPREVERIFIED的标志。&lt;br&gt;你在生成apk之前，就需要阻止相关类打上CLASS_ISPREVERIFIED的标志了。对于如何阻止，可让LoadBugClass在构造方法中，去引用别的dex文件，比如：hack.dex中的某个类即可。&lt;br&gt;空间使用的是在字节码插入代码,而不是源代码插入，使用的是javaassist库来进行字节码插入的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;需要做的两件事：1、动态改变BaseDexClassLoader对象间接引用的dexElements；2、在app打包的时候，阻止相关类去打上CLASS_ISPREVERIFIED标志。&lt;/p&gt;
&lt;p&gt;另外混淆问题，需要保存每个版本的&lt;code&gt;mapping&lt;/code&gt;混淆文件，后续编译用相同的&lt;code&gt;mapping&lt;/code&gt;文件，保证混淆过后类名始终一致。&lt;/p&gt;
&lt;p&gt;此方式无法在已经加载好的类中实现动态替换，所以需要在类加载之前替换。也就是补丁下载下来之后，需要等待用户重启应用才可完成补丁效果。&lt;/p&gt;
&lt;p&gt;目前开源实现有：&lt;a href=&quot;https://github.com/jasonross/Nuwa&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Nuwa&lt;/a&gt;，&lt;a href=&quot;https://github.com/dodola/HotFix&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HotFix&lt;/a&gt;，&lt;a href=&quot;https://github.com/bunnyblue/DroidFix&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;DroidFix&lt;/a&gt;，其各个版本也有做相应的兼容。&lt;/p&gt;
&lt;h1 id=&quot;方案对比&quot;&gt;&lt;a href=&quot;#方案对比&quot; class=&quot;headerlink&quot; title=&quot;方案对比&quot;&gt;&lt;/a&gt;方案对比&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;Dexposed方法生成补丁难度较大，需要反射写混淆后的代码，粒度太细，如果替换方法很多的话，工作量巨大。&lt;/li&gt;
&lt;li&gt;AndFix支持2.3 - 6.0系统，但JNI不像JAVA那样标准，所以偶尔会有未知的机型异常。从实现来说，类似Dexposed，通过JNI来替代方法，更加简洁的完成补丁修复，应用PATCH不需要重启。但由于实现上直接跳过了类初始化，设置为初始化完毕，所以静态函数、静态成员、构造函数都会出现问题，复杂的类&lt;code&gt;Class.forName&lt;/code&gt;很可能直接崩溃。&lt;/li&gt;
&lt;li&gt;Multiple Dex方案支持2.3 - 6.0系统，对启动速度会有略微影响，而且只能下次启动生效。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;相比而言，Multiple Dex方案较为可靠，但是如果Dex文件较为庞大，启动速度会变慢；而AndFix则适用于应用不重启即可修复，且方法够简单；Dexposed方案较为复杂，暂不考虑。&lt;/p&gt;
&lt;h1 id=&quot;REF&quot;&gt;&lt;a href=&quot;#REF&quot; class=&quot;headerlink&quot; title=&quot;REF&quot;&gt;&lt;/a&gt;REF&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://bugly.qq.com/bbs/forum.php?mod=viewthread&amp;amp;tid=63&amp;amp;highlight=ClassLoader&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;当dex分包遇上NoClassDefFoundError&amp;amp;ClassNotFoundException&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://bugly.qq.com/bbs/forum.php?mod=viewthread&amp;amp;tid=16&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;让App像Web一样发布新版本&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.zhaiyifan.cn/2015/11/20/HotPatchCompare/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;各大热补丁方案分析和比较&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://my.oschina.net/853294317/blog/308583&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android dex分包方案&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzI1MTA1MzM2Nw==&amp;amp;mid=400118620&amp;amp;idx=1&amp;amp;sn=b4fdd5055731290eef12ad0d17f39d4a&amp;amp;scene=1&amp;amp;srcid=1106Imu9ZgwybID13e7y2nEi#wechat_redirect&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;安卓App热补丁动态修复技术介绍&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/lmj623565791/article/details/49883661&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android 热补丁动态修复框架小结&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/dodola/HotFix&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;dodola/HotFix: 安卓App热补丁动态修复框架&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://tech.meituan.com/mt-android-auto-split-dex.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;美团Android DEX自动拆包及动态加载简介&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://m.oschina.net/blog/308583&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android dex分包方案&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.gitzx.com/android-inject-hook/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android下的挂钩(hook)和代码注入(inject)&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      目前关于Android的Hot Fix方案大概有三种，主要是基于[rovo89/Xposed](https://github.com/rovo89/Xposed)的[alibaba/dexposed](https://github.com/alibaba/dexposed)；以方法hook，从Field切入的[AndFix](https://github.com/alibaba/AndFix)；[Dex分包](http://bugly.qq.com/bbs/forum.php?mod=viewthread&amp;tid=16)的[Nuwa](https://github.com/jasonross/Nuwa)等。
    
    </summary>
    
      <category term="Android" scheme="https://hwangjr.github.io/categories/Android/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Android" scheme="https://hwangjr.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>调试Android应用</title>
    <link href="https://hwangjr.github.io/2016/01/27/%E8%B0%83%E8%AF%95Android%E5%BA%94%E7%94%A8/"/>
    <id>https://hwangjr.github.io/2016/01/27/调试Android应用/</id>
    <published>2016-01-27T02:05:43.000Z</published>
    <updated>2016-01-27T02:06:12.907Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;需要针对已经发布的Release包进行调试，而要调试应用程序，需要满足：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;应用Manifest文件中Application标签包含属性&lt;code&gt;android:debuggable=&amp;quot;true&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/default.prop&lt;/code&gt;中&lt;code&gt;ro.debuggable&lt;/code&gt;值为1&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;针对上面限制，可选方案有：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;反编译应用修改Manifest，插入&lt;code&gt;android:debuggable=&amp;quot;true&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;修改&lt;code&gt;boot.img&lt;/code&gt;，将&lt;code&gt;ro.debuggable&lt;/code&gt;修改为1&lt;/li&gt;
&lt;li&gt;利用&lt;a href=&quot;http://repo.xposed.info/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Xposed&lt;/a&gt;进行hook并debug应用&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;实践&quot;&gt;&lt;a href=&quot;#实践&quot; class=&quot;headerlink&quot; title=&quot;实践&quot;&gt;&lt;/a&gt;实践&lt;/h1&gt;&lt;h2 id=&quot;使用Debuggable属性&quot;&gt;&lt;a href=&quot;#使用Debuggable属性&quot; class=&quot;headerlink&quot; title=&quot;使用Debuggable属性&quot;&gt;&lt;/a&gt;使用&lt;code&gt;Debuggable&lt;/code&gt;属性&lt;/h2&gt;&lt;p&gt;从官方文档可以看出（&lt;a href=&quot;http://developer.android.com/intl/zh-cn/guide/topics/manifest/application-element.html#debug&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;application&lt;/a&gt;）：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;android:debuggable&lt;br&gt;Whether or not the application can be debugged, even when running on a device in user mode — “true” if it can be, and “false” if not. The default value is “false”.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;application&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;android:icon&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;@drawable/ic_launcher&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;android:label&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;@string/app_name&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;android:theme&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;@style/AppTheme&quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;android:debuggable&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;正常情况下，IDE会根据自身的打包来配置debug属性，因此在Manifest中最好&lt;strong&gt;不&lt;/strong&gt;设置&lt;code&gt;debuggable&lt;/code&gt;属性，而由打包方式来决定。查看具体的APK的信息：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 查看应用信息，可查看android:debuggable，0x0为false，0xffffffff为true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;aapt list -v -a apk.apk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在应用中也可判断是否&lt;code&gt;debug&lt;/code&gt;状态：&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 自身应用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public static boolean isDebuggable(Context context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		ApplicationInfo info = context.getApplicationInfo();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		return (info.flags &amp;amp; ApplicationInfo.FLAG_DEBUGGABLE) != 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; catch (Exception e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 其他应用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public static boolean isDebuggable(Context context,String packageName) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		PackageInfo pkgInfo = context.getPackageManager().getPackageInfo(packageName, 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		if (pkgInfo != null ) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			ApplicationInfo info = pkgInfo.applicationInfo;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			return (info.flags &amp;amp; ApplicationInfo.FLAG_DEBUGGABLE) != 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; catch (Exception e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;有的时候，我们还需要一些其他的方式或手段：&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 反编译apk，可修改smali及资源等&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apktool d apk.apk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 修改Manifest，新增debuggable&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vim apk/AndroidManifest.xml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 重新打包，apk文件在dist目录中，也可指定apk文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apktool b apk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 更多信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apktool -h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# debug签名，也可自行指定签名，密码android&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;jarsigner -verbose -keystore ~/.android/debug.keystore -signedjar new.apk apk.apk androiddebugkey&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看签名&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;keytool -list -alias androiddebugkey -keystore &amp;lt;path_to_debug_keystore&amp;gt;.keystore -storepass android -keypass android&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 有时需要系统签名，系统签名官方git有提供([security at master · android](https://github.com/android/platform_build/tree/master/target/product/security))&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java -jar signapk.jar platform.x509.pem platform.pk8 apk/dist/apk.apk new_sys.apk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;使用build-prop属性&quot;&gt;&lt;a href=&quot;#使用build-prop属性&quot; class=&quot;headerlink&quot; title=&quot;使用build.prop属性&quot;&gt;&lt;/a&gt;使用&lt;code&gt;build.prop&lt;/code&gt;属性&lt;/h2&gt;&lt;p&gt;有一种是重新打包&lt;code&gt;boot.img&lt;/code&gt;，简单思路就是解包&lt;code&gt;boot.img&lt;/code&gt;，修改&lt;code&gt;ramdisk&lt;/code&gt;中的&lt;code&gt;default.prop&lt;/code&gt;，再打包并刷机。因为&lt;code&gt;boot.img&lt;/code&gt;会在开机自动覆盖，所以只能通过刷&lt;code&gt;boot&lt;/code&gt;来搞定。具体可以搜索相关解包教程。&lt;/p&gt;
&lt;p&gt;另外一种要涉及重新编译&lt;code&gt;boot.img&lt;/code&gt;，不同的版本源码编译不一样。更多可以参考：&lt;a href=&quot;https://source.android.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android Open Source Project&lt;/a&gt;。&lt;br&gt;ADB权限管理：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;4.2.2版本，针对连接设备需要使用者进行确认，且分设备与MAC进行管理&lt;/li&gt;
&lt;li&gt;4.2等设备有针对ADB管理的开发者模式，通过该模式对ADB的DEBUG进行权限管理&lt;/li&gt;
&lt;li&gt;开源版本，针对&lt;code&gt;eng/userdebug/user&lt;/code&gt;进行管理与开放adb权限&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;从系统编译和编译环境控制来说，通过property进行管理，主要为&lt;code&gt;ro.debuggable&lt;/code&gt;和&lt;code&gt;system/core/rootdir/init.usb.rc&lt;/code&gt;中&lt;code&gt;sys.usb.config&lt;/code&gt;里包含对adb选项。&lt;/p&gt;
&lt;p&gt;简单编译可通过查找：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;ro.debuggable&lt;/code&gt;相关的环境变量，比如&lt;code&gt;enable_target_debugging&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查找init.rc中权限改变&lt;/li&gt;
&lt;li&gt;添加开发者模式进行管理&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在系统编译时，有几个编译选项：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;eng：编译时默认选项&lt;/li&gt;
&lt;li&gt;user：产品生成发布版&lt;/li&gt;
&lt;li&gt;userdebug：与user版本相同，添加adb服务&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在4.4源码上进行相关参数的搜索（&lt;code&gt;ro.secure&lt;/code&gt;，&lt;code&gt;ro.debuggable&lt;/code&gt;，&lt;code&gt;ro.kernel.android.checkjni&lt;/code&gt;）：&lt;br&gt;&lt;strong&gt;&lt;code&gt;ro.secure&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/services/java/com/android/server/wm/WindowManagerService.java:    private static final String SYSTEM_SECURE = &amp;quot;ro.secure&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/core/java/android/net/http/AndroidHttpClient.java:                // Never print auth token -- we used to check ro.secure=0 to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bionic/libc/bionic/system_properties.c: * binary tree.  For instance, &amp;quot;ro.secure&amp;quot;=&amp;quot;1&amp;quot; could be stored as follows:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bionic/libc/bionic/system_properties.c: *                     v        v            v     +--------&amp;gt;| ro.secure |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/main.mk:  ADDITIONAL_DEFAULT_PROPERTIES += ro.secure=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/main.mk:  ADDITIONAL_DEFAULT_PROPERTIES += ro.secure=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/build-system.html:        &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;ro.secure=0&amp;lt;/code&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/build-system.html:        &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;ro.secure=1&amp;lt;/code&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/adb/adb.c:   /* run adbd in secure mode if ro.secure is set and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/adb/adb.c:        property_get(&amp;quot;ro.secure&amp;quot;, value, &amp;quot;1&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/adb/adb.c:            // don&amp;apos;t run as root if ro.secure is set...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;build/xxx：环境设置&lt;/li&gt;
&lt;li&gt;system/xxx/adb.c：如果=1,adb root将无法成功. 还有其它的附加条件除外.&lt;/li&gt;
&lt;li&gt;WindowManagerService：用于管理viewserver(Hierarchy Viewer)&lt;/li&gt;
&lt;li&gt;AndroidHttpClient：在=1时,不会在log中dump auth token&lt;/li&gt;
&lt;li&gt;bionic/xxx/system_properties.c：介绍properties存储结构时用的例子&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ro.debuggable&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./bootable/recovery/adb_install.cpp:    int len = property_get(&amp;quot;ro.debuggable&amp;quot;, value, NULL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bootable/recovery/etc/init.rc:on property:ro.debuggable=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/build-system.html:        &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;ro.debuggable=0&amp;lt;/code&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/build-system.html:        &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;ro.debuggable=1&amp;lt;/code&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/build-system.html:        &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;ro.debuggable=1&amp;lt;/code&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/main.mk:  ADDITIONAL_DEFAULT_PROPERTIES += ro.debuggable=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/main.mk:  ADDITIONAL_DEFAULT_PROPERTIES += ro.debuggable=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/tools/post_process_props.py:  # If ro.debuggable is 1, then enable adb on USB by default&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/tools/post_process_props.py:  if prop.get(&amp;quot;ro.debuggable&amp;quot;) == &amp;quot;1&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./dalvik/docs/debugger.html:for all applications when the system property &amp;lt;code&amp;gt;ro.debuggable&amp;lt;/code&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./dalvik/docs/debugger.html:is set to &amp;lt;/code&amp;gt;1&amp;lt;/code&amp;gt; (use &amp;lt;code&amp;gt;adb shell getprop ro.debuggable&amp;lt;/code&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./device/samsung/manta/init.manta.rc:on property:ro.debuggable=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./external/libnfc-nxp/Linux_x86/phDal4Nfc.c:    property_get(&amp;quot;ro.debuggable&amp;quot;, value, &amp;quot;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./external/openssh/servconf.c:  /* Allow root login if ro.debuggable is set */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./external/openssh/servconf.c:  property_get(&amp;quot;ro.debuggable&amp;quot;, value, &amp;quot;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/av/services/audioflinger/AudioFlinger.cpp:    (void) property_get(&amp;quot;ro.debuggable&amp;quot;, value, &amp;quot;0&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/core/java/android/net/SSLCertificateSocketFactory.java:        return &amp;quot;1&amp;quot;.equals(SystemProperties.get(&amp;quot;ro.debuggable&amp;quot;)) &amp;amp;&amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/core/java/android/os/Build.java:            SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/core/java/com/android/internal/os/ZygoteConnection.java:        if (&amp;quot;1&amp;quot;.equals(SystemProperties.get(&amp;quot;ro.debuggable&amp;quot;))) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/core/java/com/android/internal/os/ZygoteConnection.java:     * If &amp;quot;ro.debuggable&amp;quot; is &amp;quot;1&amp;quot;, all apps are debuggable. Otherwise,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java:        mEnableShiftMenuBugReports = &amp;quot;1&amp;quot;.equals(SystemProperties.get(&amp;quot;ro.debuggable&amp;quot;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/services/java/com/android/server/BootReceiver.java:        SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1 ? 98304 : 65536;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/services/java/com/android/server/am/ActivityManagerService.java:    private static final String SYSTEM_DEBUGGABLE = &amp;quot;ro.debuggable&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/services/java/com/android/server/wm/WindowManagerService.java:    private static final String SYSTEM_DEBUGGABLE = &amp;quot;ro.debuggable&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/native/opengl/libs/EGL/egl.cpp:        property_get(&amp;quot;ro.debuggable&amp;quot;, value, &amp;quot;0&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/AudioRouter.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/BluetoothManager.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/BluetoothPhoneService.java:            &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CallCommandService.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CallController.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CallHandlerServiceProxy.java:            &amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CallLogger.java:        (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CallModeler.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CallNotifier.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CallStateMonitor.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CallerInfoCache.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CallerInfoCacheUpdateReceiver.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/CdmaDisplayInfo.java:    private static final boolean DBG = (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/InCallScreenShowActivation.java:                    &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/InCallScreenShowActivation.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/NotificationMgr.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/OutgoingCallBroadcaster.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/PhoneGlobals.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/PhoneGlobals.java:     *   (PhoneApp.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/PhoneGlobals.java:     *   1 - normal debug logging if ro.debuggable is set (which is true in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/RespondViaSmsManager.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/Ringer.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/SipCallOptionHandler.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./packages/services/Telephony/src/com/android/phone/WiredHeadsetManager.java:            (PhoneGlobals.DBG_LEVEL &amp;gt;= 1) &amp;amp;&amp;amp; (SystemProperties.getInt(&amp;quot;ro.debuggable&amp;quot;, 0) == 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./sdk/eclipse/plugins/com.android.ide.eclipse.adt/src/com/android/ide/eclipse/adt/internal/launch/AndroidLaunchController.java:                        // because am -D does not check for ro.debuggable and the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/adb/adb.c:            property_get(&amp;quot;ro.debuggable&amp;quot;, value, &amp;quot;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/adb/adb.c:    property_get(&amp;quot;ro.debuggable&amp;quot;, value, &amp;quot;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/adb/services.c:        property_get(&amp;quot;ro.debuggable&amp;quot;, value, &amp;quot;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/debuggerd/tombstone.c:    property_get(&amp;quot;ro.debuggable&amp;quot;, value, &amp;quot;0&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/include/cutils/trace.h: * level tracing is not allowed unless the ro.debuggable system property is&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/init/property_service.c:    ret = property_get(&amp;quot;ro.debuggable&amp;quot;, debuggable);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/libcutils/trace.c:    property_get(&amp;quot;ro.debuggable&amp;quot;, value, &amp;quot;0&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/libcutils/trace.c:// application-level tracing is allowed when the ro.debuggable system property&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./system/core/rootdir/init.rc:on property:ro.debuggable=1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;./bootable/recovery/adb_install.cpp：debuggable 开启时,才可以成功重启adb&lt;/li&gt;
&lt;li&gt;./build/xxxx：debuggable 数据设置&lt;/li&gt;
&lt;li&gt;./dalvik/xxx：在dalvik中,如果debuggable为0, 仅AndroidManifest.xml中含有debuggable 才会支持jdwp调试&lt;/li&gt;
&lt;li&gt;./external/libnfc-nxp/Linux_x86/phDal4Nfc.c：NFC调试支持开关&lt;/li&gt;
&lt;li&gt;./external/openssh/servconf.c：openssh 允许root访问开关&lt;/li&gt;
&lt;li&gt;./frameworks/av/services/audioflinger/AudioFlinger.cpp：Audio Debug 开关&lt;/li&gt;
&lt;li&gt;./frameworks/base/core/java/android/net/SSLCertificateSocketFactory.java：SSL check 开关&lt;/li&gt;
&lt;li&gt;./frameworks/base/core/java/android/os/Build.java：IS_DEBUGGABLE环境变量控制&lt;/li&gt;
&lt;li&gt;./frameworks/base/core/java/com/android/internal/os/ZygoteConnection.java：App debuggable 开关, 如果=1, 所有应用都将进行debug支持&lt;/li&gt;
&lt;li&gt;./frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java：mEnableShiftMenuBugReports 支持&lt;/li&gt;
&lt;li&gt;./frameworks/base/services/java/com/android/server/BootReceiver.java：logged event size 控制, =1 存储量大&lt;/li&gt;
&lt;li&gt;./frameworks/base/services/java/com/android/server/am/ActivityManagerService.java：系统DEBUG状态，包括do bug report, OpenGLTrace, App Profile, App Heap Dump&lt;/li&gt;
&lt;li&gt;./frameworks/base/services/java/com/android/server/wm/WindowManagerService.java：系统DEBUG状态，与ro.secure 一起管理viewserver&lt;/li&gt;
&lt;li&gt;./frameworks/native/opengl/libs/EGL/egl.cpp：EGL debug&lt;/li&gt;
&lt;li&gt;LOGD 开关：&lt;br&gt;./packages/services/Telephony/src/com/android/phone/AudioRouter.java:&lt;br&gt;./packages/services/Telephony/src/com/android/phone/BluetoothManager.java:&lt;br&gt;./packages/services/Telephony/src/com/android/phone/BluetoothPhoneService.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CallCommandService.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CallController.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CallHandlerServiceProxy.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CallLogger.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CallModeler.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CallNotifier.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CallStateMonitor.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CallerInfoCache.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CallerInfoCacheUpdateReceiver.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/CdmaDisplayInfo.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/InCallScreenShowActivation.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/InCallScreenShowActivation.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/NotificationMgr.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/OutgoingCallBroadcaster.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/PhoneGlobals.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/PhoneGlobals.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/PhoneGlobals.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/RespondViaSmsManager.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/Ringer.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/SipCallOptionHandler.java&lt;br&gt;./packages/services/Telephony/src/com/android/phone/WiredHeadsetManager.java&lt;/li&gt;
&lt;li&gt;./sdk/eclipse/plugins/com.android.ide.eclipse.adt/src/com/android/ide/eclipse/adt/internal/launch/AndroidLaunchController.java：ADT app debug launcher 支持&lt;/li&gt;
&lt;li&gt;./system/core/adb/adb.c：adb root permission&lt;/li&gt;
&lt;li&gt;./system/core/adb/services.c：adb root permission&lt;/li&gt;
&lt;li&gt;./system/core/debuggerd/tombstone.c：dump_crash want log if =1&lt;/li&gt;
&lt;li&gt;./system/core/init/property_service.c：Allow local property overwrite ro.debuggerd value&lt;/li&gt;
&lt;li&gt;./system/core/libcutils/trace.c：app trace on/off&lt;/li&gt;
&lt;li&gt;./system/core/rootdir/init.rc：adbd服务开启控制&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ro.kernel.android.checkjni&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./frameworks/base/core/jni/AndroidRuntime.cpp:        property_get(&amp;quot;ro.kernel.android.checkjni&amp;quot;, propBuf, &amp;quot;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./dalvik/docs/embedded-vm-control.html:first is &amp;lt;code&amp;gt;ro.kernel.android.checkjni&amp;lt;/code&amp;gt;.  This is set by the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./dalvik/docs/embedded-vm-control.html:of this overrides the value from &amp;lt;code&amp;gt;ro.kernel.android.checkjni&amp;lt;/code&amp;gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/main.mk:  ADDITIONAL_BUILD_PROPERTIES += ro.kernel.android.checkjni=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./build/core/build-system.html:        &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;ro.kernel.android.checkjni=1&amp;lt;/code&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;./frameworks/base/core/jni/AndroidRuntime.cpp：checkJNI value load&lt;/li&gt;
&lt;li&gt;dalvik/xxx：Java VM CheckJNI on/off&lt;/li&gt;
&lt;li&gt;build/xxx：checkJNI 状态设置&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;基本来说，&lt;code&gt;ro.secure&lt;/code&gt;主要是系统安全相关属性开关，包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;adb的root权限&lt;/li&gt;
&lt;li&gt;view server(Hierarchy Viewer)的开关&lt;/li&gt;
&lt;li&gt;系统各个模块的敏感信息输出&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;ro.debuggable&lt;/code&gt;主要是系统debug信息开关，包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;adb管理，是否可root，是否开机运行&lt;/li&gt;
&lt;li&gt;view server(Hierarchy Viewer)的开关&lt;/li&gt;
&lt;li&gt;系统debug信息开关，包括应用内部log、audio debug, ssl check, nfc, opengl elg等信息打印、系统各应用级别状态，包括profile, jdwp-debug, heap dump, opengl trace等&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;ro.kernel.android.checkjni&lt;/code&gt;主要是Java VM checkJNI的开关&lt;/p&gt;
&lt;h2 id=&quot;Xposed进行HOOK&quot;&gt;&lt;a href=&quot;#Xposed进行HOOK&quot; class=&quot;headerlink&quot; title=&quot;Xposed进行HOOK&quot;&gt;&lt;/a&gt;&lt;code&gt;Xposed&lt;/code&gt;进行HOOK&lt;/h2&gt;&lt;p&gt;从上面的两个方案来看，debug都太过麻烦，还有一个简单的方式，那就是利用开源的Xposed框架进行hook。使用这一利器之前需要先root系统。用一句话来解释Xposed：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;利用JNI作为一个中转，将所有对于被hook的方法统一进入Xposed管理器，管理器再进行hook的前后调用。Xposed 调用非JVM JNI标准接口，需要准确调用dalvik/art中的方法调用，完成对原函数的调用。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;当我们设置&lt;code&gt;android:debuggable=&amp;quot;true&amp;quot;&lt;/code&gt;时候，应用即可进行调试，而且可以进行JDWP连接进行调试。开启新应用时，Dalvik VM会forked/started新的线程，并开启debug，这时JDWP线程知道是否开启。我们跟踪&lt;code&gt;android.os.Process.start()&lt;/code&gt;方法会发现，这是一个&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public ProcessStartResult start(final String processClass,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                              final String niceName,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                              int uid, int gid, int[] gids,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                              int debugFlags, int mountExternal,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                              int targetSdkVersion,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                              String seInfo,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                              String[] zygoteArgs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return startViaZygote(processClass, niceName, uid, gid, gids, debugFlags, mountExternal, targetSdkVersion, seInfo, zygoteArgs);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; catch (ZygoteStartFailedEx ex) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Log.e(LOG_TAG,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;Starting VM process through Zygote failed&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new RuntimeException(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;Starting VM process through Zygote failed&amp;quot;, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;继续跟踪会发现，在&lt;code&gt;startViaZygote&lt;/code&gt;方法中对&lt;code&gt;DEBUG_ENABLE_DEBUGGER&lt;/code&gt;进行判断：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;if ((debugFlags &amp;amp; Zygote.DEBUG_ENABLE_DEBUGGER) != 0) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	argsForZygote.add(&amp;quot;--enable-debugger&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;接下来就简单了，利用反射获得这个&lt;code&gt;start&lt;/code&gt;的方法，并进行hook即可，代码为（完整项目查看&lt;a href=&quot;https://github.com/AndroidKnife/XposedDebug&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AndroidKnife/XposedDebug&lt;/a&gt;）：&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 这里演示了两个hook的方式，更多可以参阅文档&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PhoneDebug&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;IXposedHookLoadPackage&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; debugApps = &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; DEBUG_ENABLE_DEBUGGER = &lt;span class=&quot;number&quot;&gt;0x1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handleLoadPackage&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(XC_LoadPackage.LoadPackageParam loadPackageParam)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; Throwable &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (BuildConfig.DEBUG) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            XposedBridge.log(&lt;span class=&quot;string&quot;&gt;&quot;-- handle package: &quot;&lt;/span&gt; + loadPackageParam.packageName + &lt;span class=&quot;string&quot;&gt;&quot; process: &quot;&lt;/span&gt; + loadPackageParam.processName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (loadPackageParam.appInfo == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; ||&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                (loadPackageParam.appInfo.flags &amp;amp; (ApplicationInfo.FLAG_SYSTEM | ApplicationInfo.FLAG_UPDATED_SYSTEM_APP)) != &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            XposedBridge.log(&lt;span class=&quot;string&quot;&gt;&quot;-- appInfo: &quot;&lt;/span&gt; + loadPackageParam.appInfo);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Method start = Process.class.getMethod(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;string&quot;&gt;&quot;start&quot;&lt;/span&gt;, String.class, String.class, Integer.TYPE, Integer.TYPE, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[].class,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    Integer.TYPE, Integer.TYPE, Integer.TYPE, String.class, String[].class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            XposedBridge.log(&lt;span class=&quot;string&quot;&gt;&quot;-- start hook, appInfo: &quot;&lt;/span&gt; + loadPackageParam.appInfo);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            XposedBridge.hookMethod(start, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; XC_MethodHook() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;beforeHookedMethod&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(MethodHookParam methodHookParam)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; Throwable &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (debugApps) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; id = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; flags = (Integer) methodHookParam.args[id];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ((flags &amp;amp; DEBUG_ENABLE_DEBUGGER) == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            flags |= DEBUG_ENABLE_DEBUGGER;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        methodHookParam.args[id] = flags;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (BuildConfig.DEBUG) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            XposedBridge.log(&lt;span class=&quot;string&quot;&gt;&quot;set debuggable flags to: &quot;&lt;/span&gt; + flags);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (NoSuchMethodException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            e.printStackTrace();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        XposedBridge.hookAllMethods(Process.class, &quot;start&quot;, new XC_MethodHook() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            @Override&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            protected void beforeHookedMethod(MethodHookParam param) throws Throwable &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if (debugApps) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    int id = 5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    int flags = (Integer) param.args[id];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    if ((flags &amp;amp; DEBUG_ENABLE_DEBUGGER) == 0) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        flags |= DEBUG_ENABLE_DEBUGGER;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    param.args[id] = flags;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    if (BuildConfig.DEBUG) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        XposedBridge.log(&quot;set debuggable flags to: &quot; + flags);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;简要介绍Xposed插件开发流程&quot;&gt;&lt;a href=&quot;#简要介绍Xposed插件开发流程&quot; class=&quot;headerlink&quot; title=&quot;简要介绍Xposed插件开发流程&quot;&gt;&lt;/a&gt;简要介绍Xposed插件开发流程&lt;/h3&gt;&lt;p&gt;在Android Studio上大概过程为（完整代码：&lt;a href=&quot;https://github.com/AndroidKnife/XposedDebug&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AndroidKnife/XposedDebug&lt;/a&gt;）：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;创建工程，可以无Activity&lt;/li&gt;
&lt;li&gt;下载&lt;a href=&quot;http://forum.xda-developers.com/xposed/xposed-api-changelog-developer-news-t2714067&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Xposed API&lt;/a&gt; XposedBridgeApi-xx.jar，并将其放入&lt;code&gt;libs&lt;/code&gt;目录&lt;/li&gt;
&lt;li&gt;修改Manifest，新增三个&lt;code&gt;meta-data&lt;/code&gt;标签（详细看下面代码）&lt;/li&gt;
&lt;li&gt;实现&lt;code&gt;IXposedHookLoadPackage&lt;/code&gt;接口及具体hook逻辑&lt;/li&gt;
&lt;li&gt;在&lt;code&gt;assets/xposed_init&lt;/code&gt;配置声明需要加载到&lt;code&gt;XposedInstaller&lt;/code&gt;的入口&lt;/li&gt;
&lt;li&gt;ALL DONE。&lt;br&gt;更多可以查看&lt;a href=&quot;https://github.com/rovo89/XposedBridge/wiki/Development-tutorial&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Development tutorial&lt;/a&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;运行Xposed插件，需要：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装&lt;a href=&quot;http://repo.xposed.info/module/de.robv.android.xposed.installer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Xposed Installer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;手机root&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;AndroidManifest.xml：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;manifest&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;xmlns:android&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://schemas.android.com/apk/res/android&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;package&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;com.hwangjr.xposed.mods.phonedebug&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;application&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;android:allowBackup&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;android:supportsRtl&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;meta-data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;android:name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;xposedmodule&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;android:value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;meta-data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;android:name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;xposeddescription&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;android:value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;Phone Debugger! (ro.debuggable or android:debuggable)&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;meta-data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;android:name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;xposedminversion&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;android:value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;54&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;application&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;manifest&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;assets/xposed_init&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;com.hwangjr.xposed.mods.phonedebug.PhoneDebug&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;Ref&quot;&gt;&lt;a href=&quot;#Ref&quot; class=&quot;headerlink&quot; title=&quot;Ref&quot;&gt;&lt;/a&gt;Ref&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://repo.xposed.info/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Xposed Module Repository&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://labs.mwrinfosecurity.com/blog/2013/11/29/debug-all-the-android-things/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Debug All the Android Things - mwrlabs&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/hunanwy/article/details/9200673&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android USER 版本与ENG 版本的差异–MTK官方解释 - hunanwy的专栏 - 博客频道 - CSDN.NET&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.codefrom.com/c/49&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Xposed插件开发基础篇｜码源&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://forum.xda-developers.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android Forum for Mobile Phones, Tablets, Watches &amp;amp; Android App Development - XDA Forums&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      在实际过程中，经常需要调试应用，而应用的调试手段是需要多样，这里进行总结，Xposed完整项目查看[AndroidKnife/XposedDebug](https://github.com/AndroidKnife/XposedDebug)。
    
    </summary>
    
      <category term="Android" scheme="https://hwangjr.github.io/categories/Android/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Android" scheme="https://hwangjr.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Git设置白名单</title>
    <link href="https://hwangjr.github.io/2016/01/14/Git%E8%AE%BE%E7%BD%AE%E7%99%BD%E5%90%8D%E5%8D%95/"/>
    <id>https://hwangjr.github.io/2016/01/14/Git设置白名单/</id>
    <published>2016-01-14T11:20:39.000Z</published>
    <updated>2016-01-14T11:21:10.703Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;&lt;code&gt;.gitignore&lt;/code&gt;可以设置过滤文件，此文件还可以用来设置白名单。&lt;/p&gt;
&lt;h1 id=&quot;白名单&quot;&gt;&lt;a href=&quot;#白名单&quot; class=&quot;headerlink&quot; title=&quot;白名单&quot;&gt;&lt;/a&gt;白名单&lt;/h1&gt;&lt;p&gt;简单粗暴上菜（要解决此目录下的子目录也要过滤问题）：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# ignore everything&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# white list anything that&amp;apos;s a directort&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;!*/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# add all the file types you don&amp;apos;t want miss&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;!*.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;!*.etc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ALL DONE!&lt;/p&gt;
</content>
    
    <summary type="html">
    
      在Git中存在`.gitignore`文件来对文件进行过滤，那么如何利用此文件进行白名单设置呢。
    
    </summary>
    
      <category term="Git" scheme="https://hwangjr.github.io/categories/Git/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Git" scheme="https://hwangjr.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Git无法提交目录</title>
    <link href="https://hwangjr.github.io/2016/01/14/Git%E6%97%A0%E6%B3%95%E6%8F%90%E4%BA%A4%E7%9B%AE%E5%BD%95/"/>
    <id>https://hwangjr.github.io/2016/01/14/Git无法提交目录/</id>
    <published>2016-01-14T11:18:16.000Z</published>
    <updated>2016-01-14T11:18:32.799Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;初始化时，可能需要提交空目录，但是Git是针对文件变动进行跟踪，不对目录进行跟踪。所以一个目录如果没有文件，即使&lt;code&gt;git add&lt;/code&gt;此目录，也无法进行提交。&lt;/p&gt;
&lt;h1 id=&quot;Solution&quot;&gt;&lt;a href=&quot;#Solution&quot; class=&quot;headerlink&quot; title=&quot;Solution&quot;&gt;&lt;/a&gt;Solution&lt;/h1&gt;&lt;p&gt;简单做法是，在空目录下新建一个文件。此文件可能是：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;.gitignore&lt;/code&gt;文件&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.gitkeep&lt;/code&gt;或&lt;code&gt;.keep&lt;/code&gt;文件&lt;/li&gt;
&lt;li&gt;其他空文件&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;.gitignore&lt;/code&gt;文件内容可以是：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 忽略所有文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 除了gitignore文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;!.gitignore&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;之后进行&lt;code&gt;git add&lt;/code&gt;即可。&lt;/p&gt;
&lt;h1 id=&quot;脚本&quot;&gt;&lt;a href=&quot;#脚本&quot; class=&quot;headerlink&quot; title=&quot;脚本&quot;&gt;&lt;/a&gt;脚本&lt;/h1&gt;&lt;p&gt;懒人脚本，其实就是一行命令，查找当前目录，如果为空则添加空文件（忽略.git目录）：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;find . \( -type d -empty \) -and \( -not -regex ./\.git.* \) -exec touch &amp;#123;&amp;#125;/.gitkeep \;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;Ref&quot;&gt;&lt;a href=&quot;#Ref&quot; class=&quot;headerlink&quot; title=&quot;Ref&quot;&gt;&lt;/a&gt;Ref&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/zhaodezhong/article/details/7774869&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;git 保存空目录&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.oschina.net/question/114628_125642&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;eclipse 工程下新建文件夹无法上传至Git仓库&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://segmentfault.com/q/1010000000663317&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gitignore 添加空目录&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      在Git中提交空目录。
    
    </summary>
    
      <category term="Git" scheme="https://hwangjr.github.io/categories/Git/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Git" scheme="https://hwangjr.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Git多个远程仓库进行管理</title>
    <link href="https://hwangjr.github.io/2016/01/14/Git%E5%A4%9A%E4%B8%AA%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E8%BF%9B%E8%A1%8C%E7%AE%A1%E7%90%86/"/>
    <id>https://hwangjr.github.io/2016/01/14/Git多个远程仓库进行管理/</id>
    <published>2016-01-14T11:17:39.000Z</published>
    <updated>2016-01-14T11:17:57.423Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;现在免费代码托管平台很多，有时需要多个远程库同时进行PUSH，这时如何处理。&lt;/p&gt;
&lt;p&gt;举个糖炒栗子，本地创建git仓库后，在GitHub上创建一个仓库，并在GitCoffee上也有远程仓库，此时如何同步，狡兔三窟。可作为代码备份和远程协作。&lt;/p&gt;
&lt;h1 id=&quot;新增远程仓库&quot;&gt;&lt;a href=&quot;#新增远程仓库&quot; class=&quot;headerlink&quot; title=&quot;新增远程仓库&quot;&gt;&lt;/a&gt;新增远程仓库&lt;/h1&gt;&lt;h2 id=&quot;一次PUSH多个仓库更新&quot;&gt;&lt;a href=&quot;#一次PUSH多个仓库更新&quot; class=&quot;headerlink&quot; title=&quot;一次PUSH多个仓库更新&quot;&gt;&lt;/a&gt;一次PUSH多个仓库更新&lt;/h2&gt;&lt;p&gt;直接在&lt;code&gt;origin&lt;/code&gt;或现有远程仓库上添加远程仓库：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git remote add origin 远程仓库&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果提示&lt;code&gt;fatal: remote origin already exists&lt;/code&gt;，先删除再添加：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git remote -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 不推荐此方法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git remote rm origin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;也可以直接修改config方法，修改&lt;code&gt;.git/config&lt;/code&gt;文件：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[remote &lt;span class=&quot;string&quot;&gt;&quot;origin&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;url = 远程仓库&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;分开PUSH管理多个仓库&quot;&gt;&lt;a href=&quot;#分开PUSH管理多个仓库&quot; class=&quot;headerlink&quot; title=&quot;分开PUSH管理多个仓库&quot;&gt;&lt;/a&gt;分开PUSH管理多个仓库&lt;/h2&gt;&lt;p&gt;上面那个方法比较方便，可以PUSH到多个URL上。但是有时我们的RSA KEY不一样，会导致无法PUSH，这时可以新增一个远程仓库。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 新增&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git remote add newpush 远程仓库&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# push到新增远程仓库的master分支&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git push newpush master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git remote -v&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;直接编辑&lt;code&gt;.git/config&lt;/code&gt;也是一个方式。&lt;/p&gt;
&lt;h2 id=&quot;脚本&quot;&gt;&lt;a href=&quot;#脚本&quot; class=&quot;headerlink&quot; title=&quot;脚本&quot;&gt;&lt;/a&gt;脚本&lt;/h2&gt;&lt;p&gt;也就诞生了懒人脚本：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Push to origin master&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git push origin master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Push to newpush master&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git push newpush master&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;REF&quot;&gt;&lt;a href=&quot;#REF&quot; class=&quot;headerlink&quot; title=&quot;REF&quot;&gt;&lt;/a&gt;REF&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://www.xiaoleilu.com/push-multi-repo/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git push到多个远程库&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://higrid.net/hi/docs/git-pull-push-from-multiple-remote-locations&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;git与多个远程仓库同步&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.v2ex.com/t/37919#reply8&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;有没有可能同时把代码提交到两个git代码托管的服务器上？ - V2EX&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      对多个远程仓库进行管理。
    
    </summary>
    
      <category term="Git" scheme="https://hwangjr.github.io/categories/Git/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Git" scheme="https://hwangjr.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>使用Gitolite搭建Git服务器</title>
    <link href="https://hwangjr.github.io/2016/01/14/%E4%BD%BF%E7%94%A8Gitolite%E6%90%AD%E5%BB%BAGit%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>https://hwangjr.github.io/2016/01/14/使用Gitolite搭建Git服务器/</id>
    <published>2016-01-14T11:16:25.000Z</published>
    <updated>2016-01-14T11:17:17.279Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;搭建Git服务器作为代码管理工具。&lt;/p&gt;
&lt;h1 id=&quot;搭建&quot;&gt;&lt;a href=&quot;#搭建&quot; class=&quot;headerlink&quot; title=&quot;搭建&quot;&gt;&lt;/a&gt;搭建&lt;/h1&gt;&lt;h2 id=&quot;软件安装&quot;&gt;&lt;a href=&quot;#软件安装&quot; class=&quot;headerlink&quot; title=&quot;软件安装&quot;&gt;&lt;/a&gt;软件安装&lt;/h2&gt;&lt;p&gt;基于：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CentOS 7&lt;/li&gt;
&lt;li&gt;Git 1.8.3&lt;br&gt;直接用yum安装，如果需要最新版本，请编译安装。&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install git -y&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;添加用户&quot;&gt;&lt;a href=&quot;#添加用户&quot; class=&quot;headerlink&quot; title=&quot;添加用户&quot;&gt;&lt;/a&gt;添加用户&lt;/h2&gt;&lt;p&gt;添加一个新用户来跑git服务。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;adduser git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# or&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;useradd &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; /sbin/nologin -g git git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# /etc/passwd can checkout the users and group&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;w git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;groups git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;初始化仓库&quot;&gt;&lt;a href=&quot;#初始化仓库&quot; class=&quot;headerlink&quot; title=&quot;初始化仓库&quot;&gt;&lt;/a&gt;初始化仓库&lt;/h2&gt;&lt;p&gt;选择目录并初始化仓库：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; path/git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git init --bare project.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chown -R git project.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;禁用远程登陆&quot;&gt;&lt;a href=&quot;#禁用远程登陆&quot; class=&quot;headerlink&quot; title=&quot;禁用远程登陆&quot;&gt;&lt;/a&gt;禁用远程登陆&lt;/h2&gt;&lt;p&gt;禁止用户通过git账户登陆。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/passwd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# modify the bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git:xxxxxxxxx:/home/git:/usr/bin/git-shell&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;配置客户端key&quot;&gt;&lt;a href=&quot;#配置客户端key&quot; class=&quot;headerlink&quot; title=&quot;配置客户端key&quot;&gt;&lt;/a&gt;配置客户端key&lt;/h2&gt;&lt;p&gt;客户端生成rsa key：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ssh-keygen -t rsa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat .ssh/id_rsa.pub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;将生成的&lt;code&gt;id_rsa.pub&lt;/code&gt;复制到服务器上，修改&lt;code&gt;.ssh/authorized_keys&lt;/code&gt;文件。&lt;/p&gt;
&lt;h2 id=&quot;DONE&quot;&gt;&lt;a href=&quot;#DONE&quot; class=&quot;headerlink&quot; title=&quot;DONE&quot;&gt;&lt;/a&gt;DONE&lt;/h2&gt;&lt;p&gt;现在即可在本地进行&lt;code&gt;check out&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; git@ip:/path/git/project.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;使用Gitolite&quot;&gt;&lt;a href=&quot;#使用Gitolite&quot; class=&quot;headerlink&quot; title=&quot;使用Gitolite&quot;&gt;&lt;/a&gt;使用Gitolite&lt;/h1&gt;&lt;h2 id=&quot;背景-1&quot;&gt;&lt;a href=&quot;#背景-1&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;这是Git服务器管理软件，还有很多选择，自己决定。这里使用&lt;a href=&quot;http://gitolite.com/gitolite/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gitolite&lt;/a&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://about.gitlab.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitLab&lt;/a&gt; : GitLab includes git repository management, code reviews, issue tracking, wikis and much more. GitLab comes with GitLab CI, an easy to use continuous integration and deployment tool.&lt;br&gt;&lt;a href=&quot;https://www.scm-manager.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SCM-Manager&lt;/a&gt; : The easiest way to share and manage your Git, Mercurial and Subversion repositories over http.&lt;br&gt;&lt;a href=&quot;https://www.gerritcodereview.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gerrit Code Review&lt;/a&gt; + &lt;a href=&quot;http://gitblit.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gitblit&lt;/a&gt; : Gerrit provides web based code review and repository management for the Git version control system. Gitblit is an open-source, pure Java stack for managing, viewing, and serving Git repositories. It’s designed primarily as a tool for small workgroups who want to host centralized repositories.&lt;br&gt;&lt;a href=&quot;http://gitolite.com/gitolite/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gitolite&lt;/a&gt; + &lt;a href=&quot;http://git-scm.com/book/ch4-6.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git - Smart HTTP&lt;/a&gt; : Gitolite allows you to setup git hosting on a central server, with fine-grained access control and many more powerful features.&lt;br&gt;&lt;a href=&quot;https://gogs.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gogs&lt;/a&gt; : Gogs (Go Git Service) is a painless self-hosted Git service.&lt;br&gt;&lt;a href=&quot;http://www.getgitorious.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gitorious&lt;/a&gt; : Run Gitorious yourself — get started with free, open source Git hosting and collaboration today.&lt;br&gt;&lt;a href=&quot;https://tuleap.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Tuleap&lt;/a&gt; OR &lt;a href=&quot;https://github.com/Enalean/tuleap&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Tuleap Github&lt;/a&gt; : Traditional development, Requirement Management, Agile Development, IT Service management… Tuleap makes software projects more productive, collaborative and industrialized.&lt;br&gt;&lt;a href=&quot;http://phabricator.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Phabricator&lt;/a&gt; OR &lt;a href=&quot;https://github.com/phacility/phabricator&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;phacility/phabricator&lt;/a&gt; : Phabricator is a collection of open source web applications that help software companies build better software.&lt;br&gt;&lt;a href=&quot;https://github.com/gitbucket/gitbucket&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gitbucket/gitbucket&lt;/a&gt; : GitBucket is a GitHub clone powered by Scala which has easy installation and high extensibility.&lt;br&gt;&lt;a href=&quot;http://gitlist.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitList&lt;/a&gt; OR &lt;a href=&quot;https://github.com/klaussilveira/gitlist&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;klaussilveira/gitlist&lt;/a&gt; : GitList allows you to browse repositories using your favorite browser, viewing files under different revisions, commit history and diffs. GitList is free and open source software, written in PHP, on top of Silex and the Twig template engine.&lt;br&gt;&lt;a href=&quot;http://git.zx2c4.com/cgit/about/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;cgit&lt;/a&gt; : A hyperfast web frontend for git repositories written in C.&lt;br&gt;&lt;a href=&quot;https://github.com/mensi/cydra/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;mensi/cydra&lt;/a&gt; : &lt;strong&gt;SEEMS DEAD&lt;/strong&gt;. Cydra is a platform for project hosting written in Python. It has an extensible architecture to facilitate integration of 3rd party software such as version control systems and project management tools.&lt;br&gt;&lt;a href=&quot;https://github.com/tv42/gitosis&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;tv42/gitosis&lt;/a&gt; : &lt;strong&gt;SEEMS DEAD&lt;/strong&gt;. Manage git repositories, provide access to them over SSH, with tight access control and not needing shell accounts.&lt;br&gt;&lt;a href=&quot;https://github.com/jakubgarfield/Bonobo-Git-Server&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;jakubgarfield/Bonobo-Git-Server&lt;/a&gt; : Bonobo Git Server for Windows is a web application you can install on your IIS and easily manage and connect to your git repositories.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;安装前&quot;&gt;&lt;a href=&quot;#安装前&quot; class=&quot;headerlink&quot; title=&quot;安装前&quot;&gt;&lt;/a&gt;安装前&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;安装git&lt;/li&gt;
&lt;li&gt;创建git用户组和git用户&lt;/li&gt;
&lt;li&gt;创建管理员密钥&lt;/li&gt;
&lt;li&gt;将公钥上传到git服务器中&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;其中，创建管理员密钥：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ssh-keygen -t rsa -C &lt;span class=&quot;string&quot;&gt;&quot;git-admin&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;并将git-admin.pub上传到服务器（可使用&lt;code&gt;scp&lt;/code&gt;，如有问题，可能是firewall问题）。&lt;/p&gt;
&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;创建git用户下bin目录&lt;/li&gt;
&lt;li&gt;clone gitolite并安装&lt;/li&gt;
&lt;li&gt;使用公钥初始化gitolite&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;http://gitolite.com/gitolite/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gitolite&lt;/a&gt;安装很简单，可以查看官方文档：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;su git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir -p ~/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; git://github.com/sitaramc/gitolite&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitolite/install --help&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitolite/install -ln ~/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# make sure you have the path in $HOME/bin&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; .bash_profile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;初始化gitolite：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gitolite setup -pk git-admin.pub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;添加gitolite用户和仓库&quot;&gt;&lt;a href=&quot;#添加gitolite用户和仓库&quot; class=&quot;headerlink&quot; title=&quot;添加gitolite用户和仓库&quot;&gt;&lt;/a&gt;添加gitolite用户和仓库&lt;/h2&gt;&lt;p&gt;不需要手动在&lt;code&gt;git&lt;/code&gt;服务器中添加新用户或新仓库。因为gitolite的用户，仓库和权限规则是使用一个名为&lt;code&gt;gitolite-admin&lt;/code&gt;的特殊仓库进行维护，需通过修改该仓库并合并&lt;code&gt;push&lt;/code&gt;到服务器中。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; git@host:gitolite-admin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Clone后，看到两个目录&lt;code&gt;conf&lt;/code&gt;和&lt;code&gt;keydir&lt;/code&gt;，&lt;code&gt;conf/gitolite.conf&lt;/code&gt;用于修改仓库及用户权限，&lt;code&gt;keydir&lt;/code&gt;用于存放用户公钥。&lt;br&gt;新增&lt;code&gt;hwangjr&lt;/code&gt;用户：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;将其公钥（hwangjr.pub）添加到&lt;code&gt;keydir&lt;/code&gt;目录&lt;/li&gt;
&lt;li&gt;修改&lt;code&gt;conf/gitolite.conf&lt;/code&gt;文件，新增仓库和用户权限：&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;repo project&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RW+ = hwangjr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 或者使用其他权限：RW, R等&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;修改完上传服务器即可：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git add conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git add keydir&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git commit -m &amp;apos;add repo project, add user hwangjr&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git push&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PUSH&lt;/code&gt;成功之后，服务器会自动创建新的仓库并将用户密钥加入&lt;code&gt;.ssh/authorized_keys&lt;/code&gt;文件中。&lt;/p&gt;
&lt;h2 id=&quot;更多配置&quot;&gt;&lt;a href=&quot;#更多配置&quot; class=&quot;headerlink&quot; title=&quot;更多配置&quot;&gt;&lt;/a&gt;更多配置&lt;/h2&gt;&lt;p&gt;&lt;code&gt;gitolite&lt;/code&gt;权限管理很完备，在此给出一些配置方案：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;repo project&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RW+                     =   hwangjr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -   master              =   hwangjr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -   refs/tags/v[0-9]    =   hwangjr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RW                      =   hwangjr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RW  refs/tags/v[0-9]    =   hwangjr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    R                       =   hwangjr&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;上面配置即：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RW+ ： 能够对仓库进行所有的操作。&lt;/li&gt;
&lt;li&gt;&lt;ul&gt;
&lt;li&gt;master : 能够创建和推送任何名字不为master的分支，并能够添加任何不以v+数字开头的tag。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;ul&gt;
&lt;li&gt;refs/tags/v[0-9] : 能够添加任何以v+数字开头的tag。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;R : 能够进行clone和fetch操作。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;还可以添加组进行管理（&lt;strong&gt;@all&lt;/strong&gt;为特殊组，表示所有用户）：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@staff      =   hwangjr hwangjr1 hwangjr2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@interns    =   hwangjr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@all-devs   =   @staff @interns&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;repo secret&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RW      =   @staff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;repo project&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RW+     =   @staff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RW      =   @interns&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;更多查看：&lt;a href=&quot;http://gitolite.com/gitolite/gitolite.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gitolite all-in-one page&lt;/a&gt;。&lt;/p&gt;
&lt;h1 id=&quot;QUESTION&quot;&gt;&lt;a href=&quot;#QUESTION&quot; class=&quot;headerlink&quot; title=&quot;QUESTION&quot;&gt;&lt;/a&gt;QUESTION&lt;/h1&gt;&lt;h2 id=&quot;安装过程遇到cant-locate-Data-Dumper-pm&quot;&gt;&lt;a href=&quot;#安装过程遇到cant-locate-Data-Dumper-pm&quot; class=&quot;headerlink&quot; title=&quot;安装过程遇到cant locate Data/Dumper.pm&quot;&gt;&lt;/a&gt;安装过程遇到cant locate Data/Dumper.pm&lt;/h2&gt;&lt;p&gt;在安装过程中，可能会遇到错误：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gitolite/install -h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Can&amp;apos;t locate Data/Dumper.pm in @INC (@INC contains: /home/git/gitolite/src/lib /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at /home/git/gitolite/src/lib/Gitolite/Common.pm line 61.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BEGIN failed--compilation aborted at /home/git/gitolite/src/lib/Gitolite/Common.pm line 61.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Compilation failed in require at gitolite/install line 15.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BEGIN failed--compilation aborted at gitolite/install line 15.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这是因为缺少包：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install perl-Data-Dumper&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;Clone-gitolite-admin时提示需要输入密码&quot;&gt;&lt;a href=&quot;#Clone-gitolite-admin时提示需要输入密码&quot; class=&quot;headerlink&quot; title=&quot;Clone gitolite-admin时提示需要输入密码&quot;&gt;&lt;/a&gt;Clone gitolite-admin时提示需要输入密码&lt;/h2&gt;&lt;p&gt;在clone gitolite-admin时，会提示输入密码：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在服务端生成rsa key&lt;/li&gt;
&lt;li&gt;在服务端进行clone&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;此时会出现此错误，使用其他机器即可（需要复制rsa key到其他机器）。&lt;/p&gt;
&lt;h1 id=&quot;Ref&quot;&gt;&lt;a href=&quot;#Ref&quot; class=&quot;headerlink&quot; title=&quot;Ref&quot;&gt;&lt;/a&gt;Ref&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://wenzhiquan.github.io/blog/2014/10/14/fedora_20_install_gitolite/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Fedora 20 安装gitolite&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/sitaramc/gitolite&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sitaramc/gitolite&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://gitolite.com/gitolite/install.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;install and setup&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.loushi135.com/articles/2015/09/21/1442848708235.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;centos git服务器安装与gitolite用户权限管理 - 思迁&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      搭建Git服务器，并用gitolite管理。
    
    </summary>
    
      <category term="Git" scheme="https://hwangjr.github.io/categories/Git/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Git" scheme="https://hwangjr.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>自动清理tmp文件</title>
    <link href="https://hwangjr.github.io/2015/12/23/%E8%87%AA%E5%8A%A8%E6%B8%85%E7%90%86tmp%E6%96%87%E4%BB%B6/"/>
    <id>https://hwangjr.github.io/2015/12/23/自动清理tmp文件/</id>
    <published>2015-12-23T11:03:26.000Z</published>
    <updated>2015-12-23T11:04:17.303Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;在&lt;code&gt;supervisor&lt;/code&gt;默认配置中，其启动的&lt;code&gt;sock&lt;/code&gt;等都会放到&lt;code&gt;tmp&lt;/code&gt;目录，而&lt;code&gt;tmp&lt;/code&gt;目录会自动清理导致无法使用&lt;code&gt;supervisorctl&lt;/code&gt;命令，此时：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;修改&lt;code&gt;supervisor.conf&lt;/code&gt;文件，修改到&lt;code&gt;/var/run/&lt;/code&gt;及&lt;code&gt;/var/log/&lt;/code&gt;目录，具体配置就不进行贴了，简单直接搜索&lt;code&gt;tmp&lt;/code&gt;进行修改即可。&lt;/li&gt;
&lt;li&gt;重启&lt;code&gt;supervisor&lt;/code&gt;服务，记得&lt;code&gt;kill&lt;/code&gt;原来服务。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;但是，为什么系统会自动清理&lt;code&gt;tmp&lt;/code&gt;目录呢？&lt;/p&gt;
&lt;h1 id=&quot;RHEL-CentOS-Fedora系统&quot;&gt;&lt;a href=&quot;#RHEL-CentOS-Fedora系统&quot; class=&quot;headerlink&quot; title=&quot;RHEL\CentOS\Fedora系统&quot;&gt;&lt;/a&gt;RHEL\CentOS\Fedora系统&lt;/h1&gt;&lt;p&gt;在&lt;code&gt;CentOS 6&lt;/code&gt;中，使用&lt;code&gt;tmpwatch&lt;/code&gt;命令进行删除。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;tmpwatch - removes files which haven’t been accessed for a period of time&lt;/p&gt;
&lt;p&gt;tmpwatch [-u|-m|-c] [-MUadfqstvx] [–verbose] [–force] [–all] [–nodirs] [–nosymlinks] [–test] [–fuser] [–quiet] [–atime|–mtime|–ctime] [–dirmtime] [–exclude path] [–exclude-user user] time dirs&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在&lt;code&gt;/etc/cron.daily/&lt;/code&gt;目录下会生成&lt;code&gt;tmpwatch&lt;/code&gt;文件：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#! /bin/sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;flags=-umc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/sbin/tmpwatch &amp;quot;$flags&amp;quot; -x /tmp/.X11-unix -x /tmp/.XIM-unix \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        -x /tmp/.font-unix -x /tmp/.ICE-unix -x /tmp/.Test-unix \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        -X &amp;apos;/tmp/hsperfdata_*&amp;apos; 10d /tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/sbin/tmpwatch &amp;quot;$flags&amp;quot; 30d /var/tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for d in /var/&amp;#123;cache/man,catman&amp;#125;/&amp;#123;cat?,X11R6/cat?,local/cat?&amp;#125;; do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if [ -d &amp;quot;$d&amp;quot; ]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        /usr/sbin/tmpwatch &amp;quot;$flags&amp;quot; -f 30d &amp;quot;$d&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;done&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;将自动删除240小时未访问文件，&lt;code&gt;tmpwatch&lt;/code&gt;工具可以从指定目录递归搜索并删除一段时间未访问文件。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-u, --atime 基于访问时间来删除文件，默认的。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-m, --mtime 基于修改时间来删除文件。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-c, --ctime 基于创建时间来删除文件，对于目录，基于mtime。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-M, --dirmtime 删除目录基于目录的修改时间而不是访问时间。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-a, --all 删除所有的文件类型，不只是普通文件，符号链接和目录。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-d, --nodirs 不尝试删除目录，即使是空目录。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-d, --nosymlinks 不尝试删除符号链接。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-f, --force 强制删除。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-q, --quiet 只报告错误信息。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-s, --fuser 如果文件已经是打开状态在删除前，尝试使用“定影”命令。默认不启用。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-t, --test 仅作测试，并不真的删除文件或目录。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-U, --exclude-user=user 不删除属于谁的文件。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-v, --verbose 打印详细信息。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-x, --exclude=path 排除路径，如果路径是一个目录，它包含的所有文件被排除了。如果路径不存在，它必须是一个绝对路径不包含符号链接。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-X, --exclude-pattern=pattern 排除某规则下的路径。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;CentOS-7&quot;&gt;&lt;a href=&quot;#CentOS-7&quot; class=&quot;headerlink&quot; title=&quot;CentOS 7&quot;&gt;&lt;/a&gt;CentOS 7&lt;/h2&gt;&lt;p&gt;在&lt;code&gt;CentOS 7&lt;/code&gt;中会注意到一点，在系统中默认会清理&lt;code&gt;tmp&lt;/code&gt;目录，而且没有安装&lt;code&gt;tmpwatch&lt;/code&gt;，那么&lt;code&gt;CentOS 7&lt;/code&gt;中是通过什么来实现的呢？&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# systemctl status systemd-tmpfiles-clean.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemd-tmpfiles-clean.service - Cleanup of Temporary Directories&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Loaded: loaded (/usr/lib/systemd/system/systemd-tmpfiles-clean.service; static)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Active: inactive (dead) since Thu 2015-12-10 11:54:02 HKT; 5h 12min ago&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Docs: man:tmpfiles.d(5)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           man:systemd-tmpfiles(8)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Process: 6523 ExecStart=/usr/bin/systemd-tmpfiles --clean (code=exited, status=0/SUCCESS)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; Main PID: 6523 (code=exited, status=0/SUCCESS)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Dec 10 11:54:02 hwangjr systemd[1]: Starting Cleanup of Temporary Directories...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Dec 10 11:54:02 hwangjr systemd[1]: Started Cleanup of Temporary Directories.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;没错，就是通过这个服务来实现的，此服务为&lt;code&gt;/usr/lib/systemd/system/systemd-tmpfiles-clean.service&lt;/code&gt;。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# cat /usr/lib/systemd/system/systemd-tmpfiles-clean.service &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  This file is part of systemd.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  systemd is free software; you can redistribute it and/or modify it&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  under the terms of the GNU Lesser General Public License as published by&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  the Free Software Foundation; either version 2.1 of the License, or&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  (at your option) any later version.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Unit]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Description=Cleanup of Temporary Directories&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Documentation=man:tmpfiles.d(5) man:systemd-tmpfiles(8)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DefaultDependencies=no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Wants=local-fs.target&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;After=systemd-readahead-collect.service systemd-readahead-replay.service local-fs.target&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Before=sysinit.target shutdown.target&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ConditionDirectoryNotEmpty=|/usr/lib/tmpfiles.d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ConditionDirectoryNotEmpty=|/usr/local/lib/tmpfiles.d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ConditionDirectoryNotEmpty=|/etc/tmpfiles.d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ConditionDirectoryNotEmpty=|/run/tmpfiles.d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Service]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Type=oneshot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ExecStart=/usr/bin/systemd-tmpfiles --clean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IOSchedulingClass=idle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# cat /usr/lib/systemd/system/systemd-tmpfiles-clean.timer &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  This file is part of systemd.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  systemd is free software; you can redistribute it and/or modify it&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  under the terms of the GNU Lesser General Public License as published by&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  the Free Software Foundation; either version 2.1 of the License, or&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  (at your option) any later version.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Unit]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Description=Daily Cleanup of Temporary Directories&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Documentation=man:tmpfiles.d(5) man:systemd-tmpfiles(8)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Timer]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OnBootSec=15min&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OnUnitActiveSec=1d&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;可以看到在启动15分钟之后会清理，每隔1天清理一次。更多详细信息&lt;a href=&quot;http://www.freedesktop.org/software/systemd/man/systemd-tmpfiles.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;systemd-tmpfiles&lt;/a&gt;。&lt;/p&gt;
&lt;h1 id=&quot;Debian-Ubuntu系统&quot;&gt;&lt;a href=&quot;#Debian-Ubuntu系统&quot; class=&quot;headerlink&quot; title=&quot;Debian\Ubuntu系统&quot;&gt;&lt;/a&gt;Debian\Ubuntu系统&lt;/h1&gt;&lt;p&gt;在&lt;code&gt;Ubuntu&lt;/code&gt;系统中每次开机会进行清除，具体配置为&lt;code&gt;rcS&lt;/code&gt;文件的&lt;code&gt;TMPTIME&lt;/code&gt;值。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat /etc/default/rcS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# /etc/default/rcS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Default settings for the scripts in /etc/rcS.d/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# For information about these variables see the rcS(5) manual page.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# This file belongs to the &amp;quot;initscripts&amp;quot; package.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# delete files in /tmp during boot older than x days.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;0&amp;apos; means always, -1 or &amp;apos;infinite&amp;apos; disables the feature&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#TMPTIME=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# spawn sulogin during boot, continue normal boot if not used in 30 seconds&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#SULOGIN=no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# do not allow users to log in until the boot has completed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#DELAYLOGIN=no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# assume that the BIOS clock is set to UTC time (recommended)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UTC=yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# be more verbose during the boot process&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#VERBOSE=no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# automatically repair filesystems with inconsistencies during boot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#FSCKFIX=no&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;也就是在x天启动之后会自动清理&lt;code&gt;tmp&lt;/code&gt;目录，0代表一直清理，-1代表取消此特性。&lt;/p&gt;
&lt;h1 id=&quot;注意点&quot;&gt;&lt;a href=&quot;#注意点&quot; class=&quot;headerlink&quot; title=&quot;注意点&quot;&gt;&lt;/a&gt;注意点&lt;/h1&gt;&lt;h2 id=&quot;supervisor&quot;&gt;&lt;a href=&quot;#supervisor&quot; class=&quot;headerlink&quot; title=&quot;supervisor&quot;&gt;&lt;/a&gt;supervisor&lt;/h2&gt;&lt;p&gt;修改默认配置的&lt;code&gt;/tmp/&lt;/code&gt;目录为&lt;code&gt;/var/run/&lt;/code&gt;和&lt;code&gt;/var/log&lt;/code&gt;目录。&lt;/p&gt;
&lt;h2 id=&quot;mysql&quot;&gt;&lt;a href=&quot;#mysql&quot; class=&quot;headerlink&quot; title=&quot;mysql&quot;&gt;&lt;/a&gt;mysql&lt;/h2&gt;&lt;p&gt;默认将&lt;code&gt;pid&lt;/code&gt;和&lt;code&gt;socket&lt;/code&gt;创建在&lt;code&gt;tmp&lt;/code&gt;目录，将两个此文件排除在外，否则&lt;code&gt;mysql&lt;/code&gt;重启或使用&lt;code&gt;socket&lt;/code&gt;登陆时提示找不到文件，可通过&lt;code&gt;-U mysql&lt;/code&gt;。&lt;/p&gt;
&lt;h1 id=&quot;REF&quot;&gt;&lt;a href=&quot;#REF&quot; class=&quot;headerlink&quot; title=&quot;REF&quot;&gt;&lt;/a&gt;REF&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://www.oss4aix.org/download/SRPMS/tmpwatch/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Index of /download/SRPMS/tmpwatch&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://git.centos.org/summary/?r=rpms/tmpwatch&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rpms/tmpwatch - git.centos.org&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.ttlsa.com/linux/the-tmp-directory-is-automatically-cleared-and-the-tmpwatch-command/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;tmp目录自动清除和tmpwatch命令 - 运维生存时间&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.opsers.org/base/clean-up-on-the-linux-system-tmp-folder-you-may-want-to-know.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;关于Linux系统清理/tmp/文件夹，你可能想知道的 | 羽飞博客&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      在CentOS 6系统中会自动定期清理tmp目录，其主要是根据tmpwatch和crontab来实现，而CentOS 7中则是根据systemd-tmpfiles-clean.service服务来清理。
    
    </summary>
    
      <category term="Linux" scheme="https://hwangjr.github.io/categories/Linux/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Linux" scheme="https://hwangjr.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Android中的CheckStyle</title>
    <link href="https://hwangjr.github.io/2015/12/23/Android%E4%B8%AD%E7%9A%84CheckStyle/"/>
    <id>https://hwangjr.github.io/2015/12/23/Android中的CheckStyle/</id>
    <published>2015-12-23T11:02:08.000Z</published>
    <updated>2015-12-23T11:02:32.755Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;简单一句话：CheckStyle解放了团队编码规范的审核。&lt;/p&gt;
&lt;p&gt;CheckStyle主要实现了事实检测代码是否符合已经定义的规范，比如静态变量需要大写，函数名不超过20字符等。当发现这些检测不符合规范，则发出警告或错误。&lt;/p&gt;
&lt;p&gt;简单来说，checkstyle检测了（更多信息：&lt;a href=&quot;http://checkstyle.sourceforge.net/checks.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;checkstyle&lt;/a&gt;）：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Annotations&lt;br&gt;Block Checks&lt;br&gt;Class Design&lt;br&gt;Coding&lt;br&gt;Headers&lt;br&gt;Imports&lt;br&gt;Javadoc Comments&lt;br&gt;Metrics&lt;br&gt;Miscellaneous&lt;br&gt;Modifiers&lt;br&gt;Naming Conventions&lt;br&gt;Regexp&lt;br&gt;Size Violations&lt;br&gt;Whitespace&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;Android中的配置&quot;&gt;&lt;a href=&quot;#Android中的配置&quot; class=&quot;headerlink&quot; title=&quot;Android中的配置&quot;&gt;&lt;/a&gt;Android中的配置&lt;/h1&gt;&lt;p&gt;由于checkstyle功能丰富，如果自行配置，相对较为复杂，所以在其官网谷歌、sun都有提供范例。接下来简要介绍如何在gradle中配置checkstyle。&lt;/p&gt;
&lt;h2 id=&quot;配置plugin&quot;&gt;&lt;a href=&quot;#配置plugin&quot; class=&quot;headerlink&quot; title=&quot;配置plugin&quot;&gt;&lt;/a&gt;配置plugin&lt;/h2&gt;&lt;p&gt;在&lt;code&gt;build.gradle&lt;/code&gt;中，新增插件：&lt;br&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apply &lt;span class=&quot;string&quot;&gt;plugin:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;checkstyle&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;默认checkstyle的版本为&lt;code&gt;5.9&lt;/code&gt;，如果觉得版本较老，可以配置版本（目前最新版本为&lt;code&gt;6.13&lt;/code&gt;，但是不兼容，最高可用版本为&lt;code&gt;6.1.1&lt;/code&gt;）：&lt;br&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;checkstyle &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	toolVersion &lt;span class=&quot;string&quot;&gt;&#39;6.1.1&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;检测任务&quot;&gt;&lt;a href=&quot;#检测任务&quot; class=&quot;headerlink&quot; title=&quot;检测任务&quot;&gt;&lt;/a&gt;检测任务&lt;/h2&gt;&lt;p&gt;在添加完插件之后，需要添加检测的任务：&lt;br&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;task checkstyle(&lt;span class=&quot;string&quot;&gt;type:&lt;/span&gt; Checkstyle) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    configFile rootProject.file(&lt;span class=&quot;string&quot;&gt;&#39;checkstyle.xml&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// source fileTree(&#39;src&#39;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    source &lt;span class=&quot;string&quot;&gt;&#39;src/main/java&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ignoreFailures &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    showViolations &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    include &lt;span class=&quot;string&quot;&gt;&#39;**/*.java&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    exclude &lt;span class=&quot;string&quot;&gt;&#39;**/gen/**&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    classpath = files()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;检测配置&quot;&gt;&lt;a href=&quot;#检测配置&quot; class=&quot;headerlink&quot; title=&quot;检测配置&quot;&gt;&lt;/a&gt;检测配置&lt;/h2&gt;&lt;p&gt;可以看到上一个步骤有&lt;code&gt;checkstyle.xml&lt;/code&gt;文件，这个文件就是检测配置文件，里面包含了检测的规则，可以参考&lt;a href=&quot;https://github.com/AndroidKnife/check&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AndroidKnife/check&lt;/a&gt;这里的配置。&lt;/p&gt;
&lt;h2 id=&quot;检测插件&quot;&gt;&lt;a href=&quot;#检测插件&quot; class=&quot;headerlink&quot; title=&quot;检测插件&quot;&gt;&lt;/a&gt;检测插件&lt;/h2&gt;&lt;p&gt;如果是使用studio的话，有一系列插件可以方便检测，输入&lt;code&gt;QAPlug&lt;/code&gt;并进行搜索即可安装，其中包括&lt;code&gt;check style&lt;/code&gt;、&lt;code&gt;FindBugs&lt;/code&gt;、&lt;code&gt;PMD&lt;/code&gt;、&lt;code&gt;Hammurapi&lt;/code&gt;。&lt;/p&gt;
&lt;h1 id=&quot;Ref&quot;&gt;&lt;a href=&quot;#Ref&quot; class=&quot;headerlink&quot; title=&quot;Ref&quot;&gt;&lt;/a&gt;Ref&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/checkstyle/checkstyle&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;checkstyle/checkstyle&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://google.github.io/styleguide/javaguide.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Google Java Style&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/codeconvtoc-136057.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Code Conventions for the Java Programming Language&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://rockeyhoo.gitbooks.io/dianping_codestyle/content/source/BeautyStyle.xml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;BeautyStyle&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;顺便带上目前使用的&lt;code&gt;check style&lt;/code&gt;，可在&lt;a href=&quot;https://github.com/AndroidKnife/Utils&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AndroidKnife/Utils&lt;/a&gt;找到：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;!DOCTYPE module PUBLIC&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;-//Puppy Crawl//DTD Check Configuration 1.2//EN&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;http://www.puppycrawl.com/dtds/configuration_1_2.dtd&quot;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;Checker&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;NewlineAtEndOfFile&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;FileLength&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;FileTabCharacter&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Trailing spaces --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;RegexpSingleline&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;format&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;\s+$&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;message&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;Line has trailing spaces.&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Space after &#39;for&#39; and &#39;if&#39; --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;RegexpSingleline&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;format&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;^\s*(for|if)\(&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;message&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;Space needed before opening parenthesis.&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- For each spacing --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;RegexpSingleline&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;format&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;^\s*for \(.*?([^ ]:|:[^ ])&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;message&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;Space needed around &#39;:&#39; character.&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;TreeWalker&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;property name=&quot;cacheFile&quot; value=&quot;$&amp;#123;checkstyle.cache.file&amp;#125;&quot;/&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Checks for Javadoc comments.                     --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_javadoc.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;JavadocMethod&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;JavadocType&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;JavadocVariable&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;JavadocStyle&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Checks for Naming Conventions.                  --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_naming.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ConstantName&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;LocalFinalVariableName&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;LocalVariableName&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;MemberName&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;MethodName&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;format&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;^[a-z][a-zA-Z0-9_]*$&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;PackageName&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ParameterName&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;StaticVariableName&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;TypeName&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;format&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;^[A-Z][a-zA-Z0-9_]*$&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Checks for imports                              --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_import.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;AvoidStarImport&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;IllegalImport&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;RedundantImport&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;UnusedImports&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;processJavadoc&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Checks for Size Violations.                    --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_sizes.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;LineLength&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;max&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;150&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ignorePattern&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;^package.*|^import.*|a href|href|http://|https://|ftp://&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;MethodLength&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ParameterNumber&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Checks for whitespace                               --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_whitespace.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;GenericWhitespace&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;EmptyForIteratorPad&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;MethodParamPad&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;NoWhitespaceAfter&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;NoWhitespaceBefore&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;OperatorWrap&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ParenPad&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;TypecastParenPad&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;WhitespaceAfter&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;WhitespaceAround&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Modifier Checks                                    --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_modifiers.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;ModifierOrder&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;RedundantModifier&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Checks for blocks. You know, those &amp;#123;&amp;#125;&#39;s         --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_blocks.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;AvoidNestedBlocks&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;EmptyBlock&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;LeftCurly&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;NeedBraces&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;RightCurly&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Checks for common coding problems               --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_coding.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;AvoidInlineConditionals&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;CovariantEquals&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;EmptyStatement&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;EqualsAvoidNull&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;EqualsHashCode&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;module name=&quot;HiddenField&quot;/&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;IllegalInstantiation&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;InnerAssignment&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;MagicNumber&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;MissingSwitchDefault&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;RedundantThrows&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;SimplifyBooleanExpression&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;SimplifyBooleanReturn&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Checks for class design                         --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_design.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;DesignForExtension&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;FinalClass&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;HideUtilityClassConstructor&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;InterfaceIsType&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;module name=&quot;VisibilityModifier&quot;/&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Miscellaneous other checks.                   --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- See http://checkstyle.sf.net/config_misc.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ArrayTypeStyle&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--module name=&quot;FinalParameters&quot;/--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;TodoComment&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;UpperEll&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;module&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      利用check style可以很好的对代码进行静态检测。
    
    </summary>
    
      <category term="Android" scheme="https://hwangjr.github.io/categories/Android/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Android" scheme="https://hwangjr.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>ProGuard 精粹</title>
    <link href="https://hwangjr.github.io/2015/12/03/ProGuard-%E7%B2%BE%E7%B2%B9/"/>
    <id>https://hwangjr.github.io/2015/12/03/ProGuard-精粹/</id>
    <published>2015-12-03T07:01:25.000Z</published>
    <updated>2015-12-03T07:01:46.322Z</updated>
    
    <content type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;总结ProGuard混淆日常的使用方式，常见的混淆片段等。&lt;/p&gt;
&lt;p&gt;更多内容&lt;a href=&quot;http://proguard.sourceforge.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ProGuard&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ProGuard is a free Java class file shrinker, optimizer, obfuscator, and preverifier. It detects and removes unused classes, fields, methods, and attributes. It optimizes bytecode and removes unused instructions. It renames the remaining classes, fields, and methods using short meaningless names. Finally, it preverifies the processed code for Java 6 or higher, or for Java Micro Edition.&lt;br&gt;&lt;strong&gt;Some uses of ProGuard are:&lt;/strong&gt;&lt;br&gt;Creating more compact code, for smaller code archives, faster transfer across networks, faster loading, and smaller memory footprints.&lt;br&gt;Making programs and libraries harder to reverse-engineer.&lt;br&gt;Listing dead code, so it can be removed from the source code.&lt;br&gt;Retargeting and preverifying existing class files for Java 6 or higher, to take full advantage of their faster class loading.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;原则&quot;&gt;&lt;a href=&quot;#原则&quot; class=&quot;headerlink&quot; title=&quot;原则&quot;&gt;&lt;/a&gt;原则&lt;/h1&gt;&lt;p&gt;现在面向对象都讲究原则，做事也讲究原则。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;反射用到的类不混淆&lt;/li&gt;
&lt;li&gt;JNI方法不混淆&lt;/li&gt;
&lt;li&gt;Manifest中类不混淆&lt;/li&gt;
&lt;li&gt;四大组件和Application子类、Framework层下所有类默认不混淆&lt;/li&gt;
&lt;li&gt;Parcelable子类和Creator静态成员变量不混淆（BadParcelableException，怕了吧）&lt;/li&gt;
&lt;li&gt;GSon、FastJson等库时，Json对象不混淆（注解可解决此问题）&lt;/li&gt;
&lt;li&gt;第三方开源库或引用其他第三方SDK，加入对应混淆规则（或者库在打包aar时有指定&lt;code&gt;consumerProguardFiles&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;WebView的JS调用接口不混淆&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; class=&quot;headerlink&quot; title=&quot;使用&quot;&gt;&lt;/a&gt;使用&lt;/h1&gt;&lt;h2 id=&quot;AndroidStudio&quot;&gt;&lt;a href=&quot;#AndroidStudio&quot; class=&quot;headerlink&quot; title=&quot;AndroidStudio&quot;&gt;&lt;/a&gt;AndroidStudio&lt;/h2&gt;&lt;p&gt;新建项目后，默认会在模块目录下新建&lt;code&gt;build.gradle&lt;/code&gt;和&lt;code&gt;proguard-rules.pro&lt;/code&gt;文件，修改&lt;code&gt;build.gradle&lt;/code&gt;文件中的&lt;code&gt;proguardFiles&lt;/code&gt;配置：&lt;br&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;buildTypes &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    debug &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        versionNameSuffix &lt;span class=&quot;string&quot;&gt;&quot;-debug&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        minifyEnabled &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        zipAlignEnabled &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        shrinkResources &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    release &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        minifyEnabled &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        zipAlignEnabled &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        shrinkResources &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        proguardFiles getDefaultProguardFile(&lt;span class=&quot;string&quot;&gt;&#39;proguard-android.txt&#39;&lt;/span&gt;), &lt;span class=&quot;string&quot;&gt;&#39;proguard-rules.pro&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        signingConfig signingConfigs.xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果你是引用库，那么不要忘了给库配上混淆，详细参考&lt;a href=&quot;http://blog.hwangjr.com/2015/11/25/%E6%90%9E%E5%AE%9AAndroid-Proguard/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;搞定Android Proguard&lt;/a&gt;或者&lt;a href=&quot;https://github.com/AndroidKnife/proguard-config&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AndroidKnife/proguard-config&lt;/a&gt;：&lt;br&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;consumerProguardFiles&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;其他方式&quot;&gt;&lt;a href=&quot;#其他方式&quot; class=&quot;headerlink&quot; title=&quot;其他方式&quot;&gt;&lt;/a&gt;其他方式&lt;/h2&gt;&lt;p&gt;在SDK目录下，有&lt;code&gt;tools/proguard/&lt;/code&gt;，这里即&lt;code&gt;proguard&lt;/code&gt;的大本营，包括上面的&lt;code&gt;getDefaultProguardFile&lt;/code&gt;方法也是到此目录获取&lt;code&gt;proguard-android.txt&lt;/code&gt;文件。&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;proguard&lt;/code&gt;目录下有&lt;code&gt;bin&lt;/code&gt;目录，可以直接启动界面配置，当然也可以保存配置等。&lt;/p&gt;
&lt;p&gt;其他类似&lt;code&gt;ANT&lt;/code&gt;或者&lt;code&gt;IDE&lt;/code&gt;类似&lt;code&gt;Eclipse&lt;/code&gt;等，基本大同小异，自行摸索。&lt;/p&gt;
&lt;h1 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h1&gt;&lt;h2 id=&quot;基本配置&quot;&gt;&lt;a href=&quot;#基本配置&quot; class=&quot;headerlink&quot; title=&quot;基本配置&quot;&gt;&lt;/a&gt;基本配置&lt;/h2&gt;&lt;p&gt;常用语法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-libraryjars class_path&lt;/code&gt;：应用的依赖包，如&lt;code&gt;android-support-v4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;-keep [,modifier,…] class_specification`：不混淆某些类&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-keepclassmembers [,modifier,...] class_specification&lt;/code&gt;：不混淆类的成员&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-keepclasseswithmembers [,modifier,...] class_specification&lt;/code&gt;：不混淆类及其成员&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-keepnames class_specification&lt;/code&gt;：不混淆类及其成员名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-keepclassmembernames class_specification&lt;/code&gt;：不混淆类的成员名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-keepclasseswithmembernames class_specification&lt;/code&gt;：不混淆类及其成员名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-assumenosideeffects class_specification&lt;/code&gt;：假设调用不产生任何影响，在代码优化时会将该调用&lt;code&gt;remove&lt;/code&gt;掉。如&lt;code&gt;system.out.println&lt;/code&gt;和&lt;code&gt;Log.v&lt;/code&gt;等等&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-dontwarn [class_filter]&lt;/code&gt;：不提示warnning&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;更多关于ProGuard混淆规则和语法，参考&lt;a href=&quot;http://proguard.sourceforge.net/index.html#manual/usage.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ProGuard&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id=&quot;常见使用&quot;&gt;&lt;a href=&quot;#常见使用&quot; class=&quot;headerlink&quot; title=&quot;常见使用&quot;&gt;&lt;/a&gt;常见使用&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;不混淆类构造方法，需指定函数参数类型：&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class com.hwangjr.utils.Telephony &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public &amp;lt;init&amp;gt;(int);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;不混淆某个包所有/某个类、接口：&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-keep class com.hwangjr.utils.** &amp;#123; *; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;不混淆某个方法：&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class com.hwangjr.utils.Telephony &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public String getTelephone(java.lang.String);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;不混淆Parcelable子类：&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-keep class * implements android.os.Parcelable &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static final android.os.Parcelable$Creator *;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;使用assumenosideeffects移除代码：&lt;/strong&gt;&lt;br&gt;正常可通过BuildConfig.DEBUG变量控制日志输出，DEBUG模式可查看到日志。但ProGuard也可压缩和优化不必要的代码，包括debug日志，在发布时，会自动从源码中删除。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-assumenosideeffects class android.util.Log &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static *** v(...);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static *** i(...);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static *** d(...);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static *** w(...);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static *** e(...);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 反射：&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-keepattributes Signature&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepattributes EnclosingMethod&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Serializable类：&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class * implements java.io.Serializable &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    static final long serialVersionUID;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private static final java.io.ObjectStreamField[] serialPersistentFields;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private void writeObject(java.io.ObjectOutputStream);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private void readObject(java.io.ObjectInputStream);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    java.lang.Object writeReplace();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    java.lang.Object readResolve();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JS接口：&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class fqcn.of.javascript.interface.for.webview &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public *;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keep class com.package.name.** &amp;#123; *; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;混淆后&quot;&gt;&lt;a href=&quot;#混淆后&quot; class=&quot;headerlink&quot; title=&quot;混淆后&quot;&gt;&lt;/a&gt;混淆后&lt;/h1&gt;&lt;h2 id=&quot;混淆后文件&quot;&gt;&lt;a href=&quot;#混淆后文件&quot; class=&quot;headerlink&quot; title=&quot;混淆后文件&quot;&gt;&lt;/a&gt;混淆后文件&lt;/h2&gt;&lt;p&gt;Android Studio发布版本之后，会自动生成混淆之后文件（build/outputs/mapping/channel/release/）：&lt;br&gt;&lt;code&gt;mapping.txt&lt;/code&gt;：混淆前后代码对照，在混淆之后如果出现问题，需要查找此文件进行定位。&lt;br&gt;&lt;code&gt;dump.txt&lt;/code&gt;：APK内所有class文件结构&lt;br&gt;&lt;code&gt;seeds.txt&lt;/code&gt;：没有被混淆的类和成员&lt;br&gt;&lt;code&gt;usage.txt&lt;/code&gt;：源代码中被删除的代码&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;所以，养成保存&lt;code&gt;mapping.txt&lt;/code&gt;文件的习惯。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;混淆后验证&quot;&gt;&lt;a href=&quot;#混淆后验证&quot; class=&quot;headerlink&quot; title=&quot;混淆后验证&quot;&gt;&lt;/a&gt;混淆后验证&lt;/h2&gt;&lt;p&gt;反编译应用，大部分都变成&lt;code&gt;abc...&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&quot;混淆后调试&quot;&gt;&lt;a href=&quot;#混淆后调试&quot; class=&quot;headerlink&quot; title=&quot;混淆后调试&quot;&gt;&lt;/a&gt;混淆后调试&lt;/h2&gt;&lt;p&gt;问题分为代码问题和混淆问题。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;代码问题&lt;/strong&gt;&lt;br&gt;通过查看&lt;code&gt;mapping.txt&lt;/code&gt;文件，反推定位对应代码问题来进行解决。混淆后&lt;code&gt;$&lt;/code&gt;为匿名内部类。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;混淆问题&lt;/strong&gt;&lt;br&gt;最常见&lt;code&gt;ClassNotFoundException&lt;/code&gt;、&lt;code&gt;BadParcelableException&lt;/code&gt;及JSON解析错误。&lt;br&gt;&lt;code&gt;ClassNotFoundException&lt;/code&gt;通过mapping逆推找到类，在混淆中加入不混淆此类即可：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-keep class package.name.class &amp;#123; *; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Parcelable&lt;/code&gt;混淆错误加入：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-keep class * implements android.os.Parcelable &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static final android.os.Parcelable$Creator *;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;V4&lt;/code&gt;包、&lt;code&gt;V7&lt;/code&gt;包等包混淆问题（&lt;code&gt;sdk/tools/proguard/proguard-android.txt&lt;/code&gt;中已经明确）：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# The support library contains references to newer platform versions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Don&amp;apos;t warn about those in case this app is linking against an older&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# platform version.  We know about them, and they are safe.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontwarn android.support.**&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;更多问题可以参考：&lt;a href=&quot;http://proguard.sourceforge.net/index.html#manual/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ProGuard TroubleShooting&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;ProGuard-Android&quot;&gt;&lt;a href=&quot;#ProGuard-Android&quot; class=&quot;headerlink&quot; title=&quot;ProGuard-Android&quot;&gt;&lt;/a&gt;ProGuard-Android&lt;/h1&gt;&lt;p&gt;参考示例&lt;code&gt;sdk/tools/proguard/proguard-android.txt&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# This is a configuration file for ProGuard.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# http://proguard.sourceforge.net/index.html#manual/usage.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontusemixedcaseclassnames&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontskipnonpubliclibraryclasses&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-verbose&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Optimization is turned off by default. Dex does not like code run&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# through the ProGuard optimize and preverify steps (and performs some&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# of these optimizations on its own).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontoptimize&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontpreverify&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Note that if you want to enable optimization, you cannot just&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# include optimization flags in your own project configuration file;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# instead you will need to point to the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;quot;proguard-android-optimize.txt&amp;quot; file instead of this one from your&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# project.properties file.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepattributes *Annotation*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keep public class com.google.vending.licensing.ILicensingService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keep public class com.android.vending.licensing.ILicensingService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclasseswithmembernames class * &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    native &amp;lt;methods&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# keep setters in Views so that animations can still work.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# see http://proguard.sourceforge.net/manual/examples.html#beans&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers public class * extends android.view.View &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   void set*(***);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   *** get*();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# We want to keep methods in Activity that could be used in the XML attribute onClick&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class * extends android.app.Activity &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   public void *(android.view.View);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers enum * &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static **[] values();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static ** valueOf(java.lang.String);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class * implements android.os.Parcelable &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  public static final android.os.Parcelable$Creator CREATOR;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class **.R$* &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static &amp;lt;fields&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# The support library contains references to newer platform versions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Don&amp;apos;t warn about those in case this app is linking against an older&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# platform version.  We know about them, and they are safe.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontwarn android.support.**&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;参考示例&lt;code&gt;sdk/tools/proguard/proguard-android-optimize.txt&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# This is a configuration file for ProGuard.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# http://proguard.sourceforge.net/index.html#manual/usage.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Optimizations: If you don&amp;apos;t want to optimize, use the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# proguard-android.txt configuration file instead of this one, which&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# turns off the optimization flags.  Adding optimization introduces&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# certain risks, since for example not all optimizations performed by&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# ProGuard works on all versions of Dalvik.  The following flags turn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# off various optimizations known to have issues, but the list may not&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# be complete or up to date. (The &amp;quot;arithmetic&amp;quot; optimization can be&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# used if you are only targeting Android 2.0 or later.)  Make sure you&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# test thoroughly if you go this route.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-optimizations !code/simplification/arithmetic,!code/simplification/cast,!field/*,!class/merging/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-optimizationpasses 5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-allowaccessmodification&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontpreverify&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# The remainder of this file is identical to the non-optimized version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# of the Proguard configuration file (except that the other file has&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# flags to turn off optimization).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontusemixedcaseclassnames&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontskipnonpubliclibraryclasses&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-verbose&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepattributes *Annotation*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keep public class com.google.vending.licensing.ILicensingService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keep public class com.android.vending.licensing.ILicensingService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclasseswithmembernames class * &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    native &amp;lt;methods&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# keep setters in Views so that animations can still work.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# see http://proguard.sourceforge.net/manual/examples.html#beans&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers public class * extends android.view.View &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   void set*(***);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   *** get*();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# We want to keep methods in Activity that could be used in the XML attribute onClick&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class * extends android.app.Activity &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   public void *(android.view.View);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers enum * &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static **[] values();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static ** valueOf(java.lang.String);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class * implements android.os.Parcelable &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  public static final android.os.Parcelable$Creator CREATOR;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-keepclassmembers class **.R$* &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static &amp;lt;fields&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# The support library contains references to newer platform versions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Don&amp;apos;t warn about those in case this app is linking against an older&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# platform version.  We know about them, and they are safe.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-dontwarn android.support.**&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;参考&lt;code&gt;sdk/tools/proguard/proguard-project.txt&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# To enable ProGuard in your project, edit project.properties&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# to define the proguard.config property as described in that file.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Add project specific ProGuard rules here.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# By default, the flags in this file are appended to flags specified&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# in $&amp;#123;sdk.dir&amp;#125;/tools/proguard/proguard-android.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# You can edit the include path and order by changing the ProGuard&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# include property in project.properties.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# For more details, see&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   http://developer.android.com/guide/developing/tools/proguard.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Add any project specific keep options here:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# If your project uses WebView with JS, uncomment the following&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# and specify the fully qualified class name to the JavaScript interface&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# class:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#-keepclassmembers class fqcn.of.javascript.interface.for.webview &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   public *;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;Ref&quot;&gt;&lt;a href=&quot;#Ref&quot; class=&quot;headerlink&quot; title=&quot;Ref&quot;&gt;&lt;/a&gt;Ref&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://proguard.sourceforge.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ProGuard&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://developer.android.com/intl/zh-cn/tools/help/proguard.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ProGuard | Android Developers&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.trinea.cn/android/proguard-use/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ProGuard的作用&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/D-clock/Doc/blob/master/Gradle/4_AndroidStudio%E4%B8%8BProGuard%E6%B7%B7%E6%B7%86%E6%89%93%E5%8C%85.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AndroidStudio下ProGuard混淆打包.md&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      总结ProGuard使用及日常，主要针对Android及Java的混淆。
    
    </summary>
    
      <category term="Android" scheme="https://hwangjr.github.io/categories/Android/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Android" scheme="https://hwangjr.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>搞定Android Proguard</title>
    <link href="https://hwangjr.github.io/2015/11/25/%E6%90%9E%E5%AE%9AAndroid-Proguard/"/>
    <id>https://hwangjr.github.io/2015/11/25/搞定Android-Proguard/</id>
    <published>2015-11-25T10:23:19.000Z</published>
    <updated>2015-11-25T10:23:44.277Z</updated>
    
    <content type="html">&lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;各种引用库，各种混淆，心好累。&lt;br&gt;所以，有了&lt;a href=&quot;https://github.com/AndroidKnife/proguard-config&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AndroidKnife/proguard-config&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id=&quot;混淆设置&quot;&gt;&lt;a href=&quot;#混淆设置&quot; class=&quot;headerlink&quot; title=&quot;混淆设置&quot;&gt;&lt;/a&gt;混淆设置&lt;/h2&gt;&lt;p&gt;Android中采用Proguard进行代码混淆。每次混淆，都会开始找寻混淆配置，在此开源库中，你可以找到你想要的，如果没找到，没关系，可以PULL REQUEST。&lt;/p&gt;
&lt;h3 id=&quot;build-gradle&quot;&gt;&lt;a href=&quot;#build-gradle&quot; class=&quot;headerlink&quot; title=&quot;build.gradle&quot;&gt;&lt;/a&gt;build.gradle&lt;/h3&gt;&lt;p&gt;正常在&lt;code&gt;build.gradle&lt;/code&gt;中加入混淆配置文件即可：&lt;br&gt;&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;android &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    buildTypes &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        release &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            minifyEnabled &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            zipAlignEnabled &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            shrinkResources &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// specific proguard files&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            proguardFiles getDefaultProguardFile(&lt;span class=&quot;string&quot;&gt;&#39;proguard-android.txt&#39;&lt;/span&gt;), &lt;span class=&quot;string&quot;&gt;&#39;proguard-rules.pro&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;proguard-gson.pro&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            proguardFile &lt;span class=&quot;string&quot;&gt;&#39;proguard-square-okio.pro&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// As of Gradle Android plugin 1.1.0, the test APK has a separate config&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            testProguardFile &lt;span class=&quot;string&quot;&gt;&#39;proguard-rules-test.pro&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;proguard-rules-pro&quot;&gt;&lt;a href=&quot;#proguard-rules-pro&quot; class=&quot;headerlink&quot; title=&quot;proguard-rules.pro&quot;&gt;&lt;/a&gt;proguard-rules.pro&lt;/h3&gt;&lt;p&gt;将混淆设置加入&lt;code&gt;proguard-rules.pro&lt;/code&gt;文件也是一种方式：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-include xxx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;consumerProguardFiles&quot;&gt;&lt;a href=&quot;#consumerProguardFiles&quot; class=&quot;headerlink&quot; title=&quot;consumerProguardFiles&quot;&gt;&lt;/a&gt;consumerProguardFiles&lt;/h3&gt;&lt;p&gt;开源库中可以依赖此标志来指定库的混淆方式，此会将&lt;code&gt;*.pro&lt;/code&gt;文件打包进入&lt;code&gt;aar&lt;/code&gt;中，库混淆时候会自动使用此混淆配置文件。&lt;/p&gt;
&lt;p&gt;需要注意的是，以&lt;code&gt;consumerProguardFiles&lt;/code&gt;方式加入的混淆具有以下特性：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;*.pro&lt;/code&gt;文件会包含在&lt;code&gt;aar&lt;/code&gt;文件中&lt;/li&gt;
&lt;li&gt;这些&lt;code&gt;pro&lt;/code&gt;配置会在混淆的时候被使用&lt;/li&gt;
&lt;li&gt;此配置针对此&lt;code&gt;aar&lt;/code&gt;进行混淆配置&lt;/li&gt;
&lt;li&gt;此配置只对库文件有效，对应用程序无效&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以以&lt;a href=&quot;https://github.com/AndroidKnife/proguard-config&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AndroidKnife/proguard-config&lt;/a&gt;开源库，只要一行代码即可搞定外部混淆：&lt;br&gt;&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;dependencies&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;compile&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;com.hwangjr.proguard:proguardconfig:1.0.1@aar&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;p&gt;使用此库大善，欢迎pull request。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      引用各种库，然后各种的混淆，心好累。
    
    </summary>
    
      <category term="Android" scheme="https://hwangjr.github.io/categories/Android/"/>
    
    
      <category term="tech" scheme="https://hwangjr.github.io/tags/tech/"/>
    
      <category term="Android" scheme="https://hwangjr.github.io/tags/Android/"/>
    
  </entry>
  
</feed>
